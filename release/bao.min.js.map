{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bao.min.js","webpack:///webpack/bootstrap 940fc23ace9faadf0304","webpack:///./context.js","webpack:///./types/base-type.js","webpack:///./steps/base-step.js","webpack:///external \"jQuery\"","webpack:///./bao.js","webpack:///./step.js","webpack:///./variable.js","webpack:///./types/number-type.js","webpack:///./types/string-type.js","webpack:///./types/boolean-type.js","webpack:///./types/array-type.js","webpack:///./steps/if-step.js","webpack:///./steps/switch-step.js","webpack:///./steps/goto-step.js","webpack:///./steps/action-step.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","Array","isArray","_typeof","obj","constructor","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","Variable","Context","baoStepFactory","baoStepFactory_","vars_","Map","steps_","baoStep","set","type","hasVar","createVariable","val","setVar","eval","maybeDeclareVar","setVal","has","varContext","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_step$value","getVal","return","expr","Function","getVarContext_","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_step2$value","sync","getType","e","$","name_","val_","type_","updateDomElements_","prop","toString","parseString","str","BaoStep","context","context_","print_","init_","set_","getBaoStepFactory","data","varName","off","console","log","run","setVars_","Bao","createBaoStep","json","JSON","parse","stepJson","setStep","getStep","runBao","ifStep","IfStep","parseJsonData","gotoStep","GotoStep","actionStep","ActionStep","switchStep","SwitchStep","step","BaseStep","NumberVariable","StringVariable","BoolVariable","ArrayVariable","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_Variable","getPrototypeOf","NaN","Number","isNaN","BooleanVariable","stringify","_get","receiver","desc","getOwnPropertyDescriptor","parent","_BaoStep","_this","condition_","thenStep_","elseStep_","expr_","cases_","defaultStep_","clause","exprVal","goto_","nextSteps_","action","click"],"mappings":"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","file":"bao.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bao\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Bao\"] = factory(root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bao\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Bao\"] = factory(root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Variable = __webpack_require__(6);\n\nvar Context = function () {\n  /**\n   * Create Bao context.\n   * @param {function} baoStepFactory factory function to create BaoStep.\n   */\n  function Context(baoStepFactory) {\n    _classCallCheck(this, Context);\n\n    this.baoStepFactory_ = baoStepFactory;\n    this.vars_ = new Map();\n    this.steps_ = new Map();\n  }\n\n  /** @return {function} BaoStep factory. */\n\n\n  _createClass(Context, [{\n    key: 'getBaoStepFactory',\n    value: function getBaoStepFactory() {\n      return this.baoStepFactory_;\n    }\n\n    /**\n     * Get step by name.\n     * @param {string} name \n     */\n\n  }, {\n    key: 'getStep',\n    value: function getStep(name) {\n      return this.steps_.get(name);\n    }\n\n    /**\n     * Set the step with JSON data.\n     * @param {string} name \n     * @param {BaoStep} baoStep \n     */\n\n  }, {\n    key: 'setStep',\n    value: function setStep(name, baoStep) {\n      this.steps_.set(name, baoStep);\n    }\n\n    /**\n     * Declare a variable if it doesn't exist.\n     * @param {string} name \n     * @param {string} type\n     */\n\n  }, {\n    key: 'maybeDeclareVar',\n    value: function maybeDeclareVar(name, type) {\n      if (!this.hasVar(name)) {\n        this.vars_.set(name, Variable.createVariable(name, type));\n      }\n    }\n\n    /**\n     * Get variable by name.\n     * @param {string} name \n     * @return {Variable}\n     */\n\n  }, {\n    key: 'getVar',\n    value: function getVar(name) {\n      return this.vars_.get(name);\n    }\n\n    /**\n     * Set value of the variable. Declare one if it doesn't exist with the type of val.\n     * It takes either a literal or an expression object, e.g. {'expr': 'a+b'}.\n     * @param {string} name \n     * @param {string|object} val \n     */\n\n  }, {\n    key: 'setVar',\n    value: function setVar(name, val) {\n      // We only eval expr here.\n      if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object' && val['expr']) {\n        this.setVar(name, this.eval(val['expr']));\n      } else {\n        // Deduce the type.\n        this.maybeDeclareVar(name, typeof val === 'undefined' ? 'undefined' : _typeof(val));\n        this.vars_.get(name).setVal(val);\n      }\n    }\n\n    /**\n     * Tell if a variable has been declared.\n     * @param {string} name \n     */\n\n  }, {\n    key: 'hasVar',\n    value: function hasVar(name) {\n      return this.vars_.has(name);\n    }\n\n    /**\n     * Return a js object with mapping of variable name to value.\n     * @private\n     */\n\n  }, {\n    key: 'getVarContext_',\n    value: function getVarContext_() {\n      var varContext = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.vars_[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              name = _step$value[0],\n              val = _step$value[1];\n\n          varContext[name] = val.getVal();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return varContext;\n    }\n    /**\n     * Eval an expression in this context.\n     * @param {string} expr \n     */\n\n  }, {\n    key: 'eval',\n    value: function _eval(expr) {\n      return new Function('with(this){return ' + expr + '}').call(this.getVarContext_());\n    }\n  }, {\n    key: 'sync',\n\n\n    /** Update all variables with DOM elements. */\n    value: function sync() {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.vars_[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _step2$value = _slicedToArray(_step2.value, 2),\n              name = _step2$value[0],\n              val = _step2$value[1];\n\n          val.sync();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }]);\n\n  return Context;\n}();\n\nmodule.exports = Context;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar $ = __webpack_require__(3);\n\nfunction getType(e) {\n  if (Array.isArray(e)) {\n    return 'array';\n  }\n  return typeof e === 'undefined' ? 'undefined' : _typeof(e);\n}\n\n/**\n * A base class for bao variable implemented by specific types.\n */\n\nvar Variable = function () {\n  /**\n   * Create a variable with name and type.\n   * Do not use this contructor directly. Instead use the factory function\n   * createVariable() in variable.js.\n   * @param {string} name \n   * @param {string} type one of number, string and boolean.\n   */\n  function Variable(name, type) {\n    _classCallCheck(this, Variable);\n\n    this.name_ = name;\n    this.val_ = undefined;\n    this.type_ = type;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Set the value of this variable.\n   * @param {anything} val\n   */\n\n\n  _createClass(Variable, [{\n    key: 'setVal',\n    value: function setVal(val) {\n      if (getType(val) !== this.type_) {\n        throw 'Invalid ' + this.type_ + ' ' + val;\n      }\n      this.val_ = val;\n      this.updateDomElements_();\n    }\n\n    /**\n     * Get the value of variable.\n     */\n\n  }, {\n    key: 'getVal',\n    value: function getVal() {\n      return this.val_;\n    }\n\n    /** \n     * Update the value of the linked DOM element with this variable.\n     * @private\n     */\n\n  }, {\n    key: 'updateDomElements_',\n    value: function updateDomElements_() {\n      $('[data-bao-target=\"' + this.name_ + '\"]').prop('placeholder', this.name_).val(this.toString());\n    }\n\n    /**\n     * Update the value with the linked DOM element.\n     */\n\n  }, {\n    key: 'sync',\n    value: function sync() {\n      var val = $('[data-bao-target=\"' + this.name_ + '\"]').val();\n      if (val !== undefined) {\n        this.val_ = this.parseString(val);\n      }\n    }\n\n    /**\n     * Converts string to the type.\n     * A base method to be implemented by subclasses.\n     * @param {string} str \n     */\n\n  }, {\n    key: 'parseString',\n    value: function parseString(str) {\n      throw 'This method is not implemented';\n    }\n\n    /** Convert the variable to string */\n\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.val_ && this.val_.toString();\n    }\n  }]);\n\n  return Variable;\n}();\n\nmodule.exports = Variable;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar $ = __webpack_require__(3);\nvar Context = __webpack_require__(0);\n\n/** A base class for a step abstraction in bao. */\n\nvar BaoStep = function () {\n  function BaoStep(context) {\n    _classCallCheck(this, BaoStep);\n\n    // Type of the step. One of BaoStep, IfStep, GotoStep, ActionStep and SwitchStep.\n    this.type_ = 'BaoStep';\n    // Context\n    this.context_ = context;\n    // Step name\n    this.name_ = undefined;\n    // console.log\n    this.print_ = undefined;\n    // Init while entering, another step.\n    this.init_ = undefined;\n    // Setters of this step\n    this.set_ = new Map();\n    // BaoStep factory.\n    this.baoStepFactory_ = context.getBaoStepFactory();\n  }\n\n  /** Get step type. */\n\n\n  _createClass(BaoStep, [{\n    key: 'getType',\n    value: function getType() {\n      return this.type_;\n    }\n\n    /** Get step name. */\n\n  }, {\n    key: 'getName',\n    value: function getName() {\n      return this.name_;\n    }\n\n    /**\n     * Initialize step with JSON data.\n     * @param {object} data \n     */\n\n  }, {\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      if (data) {\n        // Set step name.\n        this.name_ = data['name'];\n        // Set init step.\n        if (data['init']) {\n          // Anonymous step.\n          this.init_ = this.baoStepFactory_(this.context_, data['init']);\n        }\n        // print, literal only.\n        if (data['print'] !== undefined) {\n          this.print_ = data['print'];\n        }\n        if (data['decl']) {\n          for (var varName in data['decl']) {\n            // Vars decl.\n            this.context_.maybeDeclareVar(varName, data['decl'][varName]);\n          }\n        }\n        // Set setlist.\n        if (data['set']) for (var _varName in data['set']) {\n          this.set_.set(_varName, data['set'][_varName]);\n        }\n      }\n    }\n\n    /** \n     * Run the setter step.\n     * @private\n     */\n\n  }, {\n    key: 'setVars_',\n    value: function setVars_() {\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.set_[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              name = _step$value[0],\n              val = _step$value[1];\n\n          this.context_.setVar(name, val);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n\n    /** Run the step. */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      // Remove all registered click handlers first.\n      $('[data-bao-action]').off('click').prop('disabled', true);\n      console.log('Current step: ' + this.name_ + ' (' + this.getType() + ')');\n      // Run init\n      if (this.init_) {\n        this.init_.run();\n      }\n      if (this.set_) {\n        this.setVars_();\n      }\n      if (this.print_ != undefined) {\n        console.log(this.print_);\n      }\n      return null;\n    }\n  }]);\n\n  return BaoStep;\n}();\n\nmodule.exports = BaoStep;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BaoStep = __webpack_require__(5);\nvar Context = __webpack_require__(0);\n\nvar Bao = function () {\n  function Bao() {\n    _classCallCheck(this, Bao);\n\n    this.context_ = new Context(BaoStep.createBaoStep);\n  }\n\n  /** Initialize bao with JSON data. */\n\n\n  _createClass(Bao, [{\n    key: 'parseString',\n    value: function parseString(json) {\n      var data = JSON.parse(json);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var stepJson = _step.value;\n\n          this.context_.setStep(stepJson['name'], BaoStep.createBaoStep(this.context_, stepJson));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return this;\n    }\n\n    /** Start bao flow. */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      var current = this.context_.getStep('#begin');\n      current.run();\n    }\n  }]);\n\n  return Bao;\n}();\n\n// Only exports bao runner.\n\n\nmodule.exports = {\n  runBao: function runBao(json) {\n    new Bao().parseString(json).run();\n  }\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Context = __webpack_require__(0);\nvar BaseStep = __webpack_require__(2);\nvar IfStep = __webpack_require__(11);\nvar SwitchStep = __webpack_require__(12);\nvar GotoStep = __webpack_require__(13);\nvar ActionStep = __webpack_require__(14);\n\n/**\n * A factory method to create bao steps with appropriate subclasses.\n * @param {Context} context\n * @param {object} data\n * @return {BaoStep}\n */\nfunction createBaoStep(context, data) {\n  if (data['if']) {\n    var ifStep = new IfStep(context);\n    ifStep.parseJsonData(data);\n    return ifStep;\n  }\n  if (data['goto']) {\n    var gotoStep = new GotoStep(context);\n    gotoStep.parseJsonData(data);\n    return gotoStep;\n  }\n  if (data['next']) {\n    var actionStep = new ActionStep(context);\n    actionStep.parseJsonData(data);\n    return actionStep;\n  }\n  if (data['switch']) {\n    var switchStep = new SwitchStep(context);\n    switchStep.parseJsonData(data);\n    return switchStep;\n  }\n  var step = new BaseStep(context);\n  step.parseJsonData(data);\n  return step;\n}\n\nmodule.exports = {\n  // Export factory.\n  createBaoStep: createBaoStep\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Variable = __webpack_require__(1);\nvar NumberVariable = __webpack_require__(7);\nvar StringVariable = __webpack_require__(8);\nvar BooleanVariable = __webpack_require__(9);\nvar ArrayVariable = __webpack_require__(10);\n/**\n * A factory to create a variable with name and type.\n * @param {string} name \n * @param {string} type one of number, string and boolean.\n * @return {Variable}\n */\nfunction createVariable(name, type) {\n  switch (type) {\n    case 'number':\n      return new NumberVariable(name);\n    case 'string':\n      return new StringVariable(name);\n    case 'boolean':\n      return new BoolVariable(name);\n    case 'array':\n      return new ArrayVariable(name);\n    default:\n      throw 'Unsupported type ' + type;\n  }\n}\n\nmodule.exports = {\n  createVariable: createVariable\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Variable = __webpack_require__(1);\n\nvar NumberVariable = function (_Variable) {\n  _inherits(NumberVariable, _Variable);\n\n  /**\n   * Create a number variable.\n   * @param {string} name \n   */\n  function NumberVariable(name) {\n    _classCallCheck(this, NumberVariable);\n\n    return _possibleConstructorReturn(this, (NumberVariable.__proto__ || Object.getPrototypeOf(NumberVariable)).call(this, name, 'number'));\n  }\n\n  /**\n   * Convert string to number.\n   * @param {string} str e.g. '43.250', '250', 43e250', '0b1101', '0x1f',\n   *                          'NaN', 'Infinity'\n   * @override\n   */\n\n\n  _createClass(NumberVariable, [{\n    key: 'parseString',\n    value: function parseString(str) {\n      if (str === 'NaN') {\n        return NaN;\n      }\n      val = Number(str);\n      // Unable to parse.\n      if (isNaN(val)) {\n        throw 'Invalid number ' + str;\n      }\n      return val;\n    }\n  }]);\n\n  return NumberVariable;\n}(Variable);\n\nmodule.exports = NumberVariable;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Variable = __webpack_require__(1);\n\nvar StringVariable = function (_Variable) {\n  _inherits(StringVariable, _Variable);\n\n  /**\n   * Create a string variable.\n   * @param {string} name \n   */\n  function StringVariable(name) {\n    _classCallCheck(this, StringVariable);\n\n    return _possibleConstructorReturn(this, (StringVariable.__proto__ || Object.getPrototypeOf(StringVariable)).call(this, name, 'string'));\n  }\n\n  /**\n   * @param {string} str\n   * @override\n   */\n\n\n  _createClass(StringVariable, [{\n    key: 'parseString',\n    value: function parseString(str) {\n      return str;\n    }\n  }]);\n\n  return StringVariable;\n}(Variable);\n\nmodule.exports = StringVariable;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Variable = __webpack_require__(1);\n\nvar BooleanVariable = function (_Variable) {\n  _inherits(BooleanVariable, _Variable);\n\n  /**\n   * Create a boolean variable.\n   * @param {string} name \n   */\n  function BooleanVariable(name) {\n    _classCallCheck(this, BooleanVariable);\n\n    return _possibleConstructorReturn(this, (BooleanVariable.__proto__ || Object.getPrototypeOf(BooleanVariable)).call(this, name, 'boolean'));\n  }\n\n  /**\n   * Convert '0', '1', 'true', 'false' to boolean.\n   * @param {string} str\n   * @override\n   */\n\n\n  _createClass(BooleanVariable, [{\n    key: 'parseString',\n    value: function parseString(str) {\n      switch (str) {\n        case '1':\n        case 'true':\n          return true;\n        case '0':\n        case 'false':\n          return false;\n        default:\n          throw 'A boolean value must be either true or false (' + str + ')';\n      }\n    }\n  }]);\n\n  return BooleanVariable;\n}(Variable);\n\nmodule.exports = BooleanVariable;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Variable = __webpack_require__(1);\n\nvar ArrayVariable = function (_Variable) {\n  _inherits(ArrayVariable, _Variable);\n\n  /**\n   * Create an array variable.\n   * @param {string} name\n   */\n  function ArrayVariable(name) {\n    _classCallCheck(this, ArrayVariable);\n\n    return _possibleConstructorReturn(this, (ArrayVariable.__proto__ || Object.getPrototypeOf(ArrayVariable)).call(this, name, 'array'));\n  }\n\n  /**\n   * Convert string to array.\n   * @param {string} str e.g. '[1,2,3]', '[\"1\",\"2\"]', '[[1,2],[3,4]]'\n   * @override\n   */\n\n\n  _createClass(ArrayVariable, [{\n    key: 'parseString',\n    value: function parseString(str) {\n      var arr = JSON.parse(str);\n      if (!Array.isArray(arr)) {\n        throw 'Invalid array ' + str;\n      }\n      return arr;\n    }\n    /**\n     * Convert array to json string.\n     * @override\n     */\n\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.val_ && JSON.stringify(this.val_);\n    }\n  }]);\n\n  return ArrayVariable;\n}(Variable);\n\nmodule.exports = ArrayVariable;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Context = __webpack_require__(0);\nvar BaoStep = __webpack_require__(2);\n\n/** A step that contains if clause. */\n\nvar IfStep = function (_BaoStep) {\n  _inherits(IfStep, _BaoStep);\n\n  function IfStep(context) {\n    _classCallCheck(this, IfStep);\n\n    var _this = _possibleConstructorReturn(this, (IfStep.__proto__ || Object.getPrototypeOf(IfStep)).call(this, context));\n\n    _this.type_ = 'IfStep';\n    _this.condition_ = undefined;\n    _this.thenStep_ = undefined;\n    _this.elseStep_ = undefined;\n    return _this;\n  }\n\n  /**\n   * Parse an IfStep.\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(IfStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(IfStep.prototype.__proto__ || Object.getPrototypeOf(IfStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['if'] || !data['if']['condition'] || !data['if']['then']) {\n        throw 'Invalid if step';\n      }\n      this.condition_ = data['if']['condition'];\n      this.thenStep_ = this.baoStepFactory_(this.context_, data['if']['then']);\n      // Optional else clause.\n      if (data['if']['else']) {\n        this.elseStep_ = this.baoStepFactory_(this.context_, data['if']['else']);\n      }\n    }\n\n    /**\n     * If step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(IfStep.prototype.__proto__ || Object.getPrototypeOf(IfStep.prototype), 'run', this).call(this);\n      if (!this.condition_ || !this.thenStep_) {\n        throw 'Invalid if step';\n      }\n      if (this.context_.eval(this.condition_)) {\n        return this.thenStep_.run();\n      }\n      if (this.elseStep_) {\n        return this.elseStep_.run();\n      }\n      return null;\n    }\n  }]);\n\n  return IfStep;\n}(BaoStep);\n\nmodule.exports = IfStep;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Context = __webpack_require__(0);\nvar BaoStep = __webpack_require__(2);\n\n/** A step that contains switch clause. */\n\nvar SwitchStep = function (_BaoStep) {\n  _inherits(SwitchStep, _BaoStep);\n\n  function SwitchStep(context) {\n    _classCallCheck(this, SwitchStep);\n\n    var _this = _possibleConstructorReturn(this, (SwitchStep.__proto__ || Object.getPrototypeOf(SwitchStep)).call(this, context));\n\n    _this.type_ = 'SwitchStep';\n    _this.expr_ = undefined;\n    _this.cases_ = new Map();\n    _this.defaultStep_ = undefined;\n    return _this;\n  }\n\n  /**\n   * Parse a SwitchStep.\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(SwitchStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(SwitchStep.prototype.__proto__ || Object.getPrototypeOf(SwitchStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['switch'] || !data['switch']['expr'] || !data['switch']['cases']) {\n        throw 'Invalid switch step';\n      }\n      this.expr_ = data['switch']['expr'];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = data['switch']['cases'][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              val = _step$value[0],\n              clause = _step$value[1];\n\n          this.cases_.set(val, this.baoStepFactory_(this.context_, clause));\n        }\n\n        // Optional default clause.\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      if (data['switch']['default']) {\n        this.defaultStep_ = this.baoStepFactory_(this.context_, data['switch']['default']);\n      }\n    }\n\n    /**\n     * Switch step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(SwitchStep.prototype.__proto__ || Object.getPrototypeOf(SwitchStep.prototype), 'run', this).call(this);\n      if (!this.expr_ || !this.cases_) {\n        throw 'Invalid switch step';\n      }\n      var exprVal = this.context_.eval(this.expr_);\n      var clause = this.cases_.get(exprVal);\n      if (clause) {\n        return clause.run();\n      }\n      if (this.defaultStep_) {\n        return this.defaultStep_.run();\n      }\n      return null;\n    }\n  }]);\n\n  return SwitchStep;\n}(BaoStep);\n\nmodule.exports = SwitchStep;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Context = __webpack_require__(0);\nvar BaoStep = __webpack_require__(2);\n\n/** A step that contains goto clause. */\n\nvar GotoStep = function (_BaoStep) {\n  _inherits(GotoStep, _BaoStep);\n\n  function GotoStep(context) {\n    _classCallCheck(this, GotoStep);\n\n    var _this = _possibleConstructorReturn(this, (GotoStep.__proto__ || Object.getPrototypeOf(GotoStep)).call(this, context));\n\n    _this.type_ = 'GotoStep';\n    // The **name** of goto step.\n    _this.goto_ = undefined;\n    return _this;\n  }\n\n  /**\n   * Parse an GotoStep\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(GotoStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(GotoStep.prototype.__proto__ || Object.getPrototypeOf(GotoStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['goto']) {\n        throw 'Invalid goto step';\n      }\n      this.goto_ = data['goto'];\n    }\n\n    /**\n     * Goto step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(GotoStep.prototype.__proto__ || Object.getPrototypeOf(GotoStep.prototype), 'run', this).call(this);\n      if (!this.goto_ || !this.context_.getStep(this.goto_)) {\n        throw 'Invalid goto step';\n      }\n      return this.context_.getStep(this.goto_).run();\n    }\n  }]);\n\n  return GotoStep;\n}(BaoStep);\n\nmodule.exports = GotoStep;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar $ = __webpack_require__(3);\nvar Context = __webpack_require__(0);\nvar BaoStep = __webpack_require__(2);\n\n/** A step that waits on UI click actions. */\n\nvar ActionStep = function (_BaoStep) {\n  _inherits(ActionStep, _BaoStep);\n\n  function ActionStep(context) {\n    _classCallCheck(this, ActionStep);\n\n    var _this = _possibleConstructorReturn(this, (ActionStep.__proto__ || Object.getPrototypeOf(ActionStep)).call(this, context));\n\n    _this.type_ = 'ActionStep';\n    // Next steps.\n    _this.nextSteps_ = new Map();\n    return _this;\n  }\n\n  /**\n   * Parse an ActionStep\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(ActionStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(ActionStep.prototype.__proto__ || Object.getPrototypeOf(ActionStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['next']) {\n        throw 'Invalid action step';\n      }\n      if (data['next']) {\n        for (var action in data['next']) {\n          // Create an anonymous step.\n          var next = this.baoStepFactory_(this.context_, data['next'][action]);\n          this.nextSteps_.set(action, next);\n        }\n      }\n    }\n\n    /**\n     * Action step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(ActionStep.prototype.__proto__ || Object.getPrototypeOf(ActionStep.prototype), 'run', this).call(this);\n      // Register click handler.\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.nextSteps_[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              action = _step$value[0],\n              next = _step$value[1];\n\n          $('[data-bao-action=\"' + action + '\"]').prop('disabled', false).click([this.context_, next], function (e) {\n            var context = e.data[0];\n            context.sync();\n            var next = e.data[1];\n            next.run();\n          });\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return null;\n    }\n  }]);\n\n  return ActionStep;\n}(BaoStep);\n\nmodule.exports = ActionStep;\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// bao.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 940fc23ace9faadf0304","const Variable = require('./variable');\n\nclass Context {\n  /**\n   * Create Bao context.\n   * @param {function} baoStepFactory factory function to create BaoStep.\n   */\n  constructor(baoStepFactory) {\n    this.baoStepFactory_ = baoStepFactory;\n    this.vars_ = new Map();\n    this.steps_ = new Map();\n  }\n\n  /** @return {function} BaoStep factory. */\n  getBaoStepFactory() {\n    return this.baoStepFactory_;\n  }\n\n  /**\n   * Get step by name.\n   * @param {string} name \n   */\n  getStep(name) {\n    return this.steps_.get(name);\n  }\n\n  /**\n   * Set the step with JSON data.\n   * @param {string} name \n   * @param {BaoStep} baoStep \n   */\n  setStep(name, baoStep) {\n    this.steps_.set(name, baoStep);\n  }\n\n  /**\n   * Declare a variable if it doesn't exist.\n   * @param {string} name \n   * @param {string} type\n   */\n  maybeDeclareVar(name, type) {\n    if (!this.hasVar(name)) {\n      this.vars_.set(name, Variable.createVariable(name, type));\n    }\n  }\n\n  /**\n   * Get variable by name.\n   * @param {string} name \n   * @return {Variable}\n   */\n  getVar(name) {\n    return this.vars_.get(name);\n  }\n\n  /**\n   * Set value of the variable. Declare one if it doesn't exist with the type of val.\n   * It takes either a literal or an expression object, e.g. {'expr': 'a+b'}.\n   * @param {string} name \n   * @param {string|object} val \n   */\n  setVar(name, val) {\n    // We only eval expr here.\n    if (typeof val === 'object' && val['expr']) {\n      this.setVar(name, this.eval(val['expr']));\n    } else {\n      // Deduce the type.\n      this.maybeDeclareVar(name, typeof val);\n      this.vars_.get(name).setVal(val);\n    }\n  }\n\n  /**\n   * Tell if a variable has been declared.\n   * @param {string} name \n   */\n  hasVar(name) {\n    return this.vars_.has(name);\n  }\n\n  /**\n   * Return a js object with mapping of variable name to value.\n   * @private\n   */\n  getVarContext_() {\n    const varContext = {};\n    for (const [name, val] of this.vars_) {\n      varContext[name] = val.getVal();\n    }\n    return varContext;\n  }\n  /**\n   * Eval an expression in this context.\n   * @param {string} expr \n   */\n  eval(expr) {\n    return (new Function('with(this){return ' + expr + '}')).call(this.getVarContext_());\n  };\n\n  /** Update all variables with DOM elements. */\n  sync() {\n    for (const [name, val] of this.vars_) {\n      val.sync();\n    }\n  }\n}\n\nmodule.exports = Context;\n\n\n\n// WEBPACK FOOTER //\n// ./context.js","const $ = require('jquery');\n\nfunction getType(e) {\n  if (Array.isArray(e)) {\n    return 'array';\n  }\n  return typeof e;\n}\n\n/**\n * A base class for bao variable implemented by specific types.\n */\nclass Variable {\n  /**\n   * Create a variable with name and type.\n   * Do not use this contructor directly. Instead use the factory function\n   * createVariable() in variable.js.\n   * @param {string} name \n   * @param {string} type one of number, string and boolean.\n   */\n  constructor(name, type) {\n    this.name_ = name;\n    this.val_ = undefined;\n    this.type_ = type;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Set the value of this variable.\n   * @param {anything} val\n   */\n  setVal(val) {\n    if (getType(val) !== this.type_) {\n      throw 'Invalid ' + this.type_ + ' ' + val;\n    }\n    this.val_ = val;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Get the value of variable.\n   */\n  getVal() {\n    return this.val_;\n  }\n\n  /** \n   * Update the value of the linked DOM element with this variable.\n   * @private\n   */\n  updateDomElements_() {\n    $('[data-bao-target=\"' + this.name_ + '\"]')\n      .prop('placeholder', this.name_)\n      .val(this.toString());\n  }\n\n  /**\n   * Update the value with the linked DOM element.\n   */\n  sync() {\n    const val = $('[data-bao-target=\"' + this.name_ + '\"]').val();\n    if (val !== undefined) {\n      this.val_ = this.parseString(val);\n    }\n  }\n\n  /**\n   * Converts string to the type.\n   * A base method to be implemented by subclasses.\n   * @param {string} str \n   */\n  parseString(str) {\n    throw 'This method is not implemented';\n  }\n\n  /** Convert the variable to string */\n  toString() {\n    return this.val_ && this.val_.toString();\n  }\n}\n\nmodule.exports = Variable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/base-type.js","const $ = require('jquery');\nconst Context = require('../context');\n\n/** A base class for a step abstraction in bao. */\nclass BaoStep {\n  constructor(context) {\n    // Type of the step. One of BaoStep, IfStep, GotoStep, ActionStep and SwitchStep.\n    this.type_ = 'BaoStep';\n    // Context\n    this.context_ = context;\n    // Step name\n    this.name_ = undefined;\n    // console.log\n    this.print_ = undefined;\n    // Init while entering, another step.\n    this.init_ = undefined;\n    // Setters of this step\n    this.set_ = new Map();\n    // BaoStep factory.\n    this.baoStepFactory_ = context.getBaoStepFactory();\n  }\n\n  /** Get step type. */\n  getType() {\n    return this.type_;\n  }\n\n  /** Get step name. */\n  getName() {\n    return this.name_;\n  }\n\n  /**\n   * Initialize step with JSON data.\n   * @param {object} data \n   */\n  parseJsonData(data) {\n    if (data) {\n      // Set step name.\n      this.name_ = data['name'];\n      // Set init step.\n      if (data['init']) {\n        // Anonymous step.\n        this.init_ = this.baoStepFactory_(this.context_, data['init']);\n      }\n      // print, literal only.\n      if (data['print'] !== undefined) {\n        this.print_ = data['print'];\n      }\n      if (data['decl']) {\n        for (const varName in data['decl']) {\n          // Vars decl.\n          this.context_.maybeDeclareVar(varName, data['decl'][varName]);\n        }\n      }\n      // Set setlist.\n      if (data['set'])\n      for (const varName in data['set']) {\n        this.set_.set(varName, data['set'][varName]);\n      }\n    }\n  }\n\n  /** \n   * Run the setter step.\n   * @private\n   */\n  setVars_() {\n    for (const [name, val] of this.set_) {\n      this.context_.setVar(name, val);\n    }\n  }\n\n  /** Run the step. */\n  run() {\n    // Remove all registered click handlers first.\n    $('[data-bao-action]').off('click').prop('disabled', true);\n    console.log('Current step: ' + this.name_ + ' (' + this.getType() + ')');\n    // Run init\n    if (this.init_) {\n      this.init_.run();\n    }\n    if (this.set_) {\n      this.setVars_();\n    }\n    if (this.print_ != undefined) {\n      console.log(this.print_);\n    }\n    return null;\n  }\n}\n\nmodule.exports = BaoStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/base-step.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 3\n// module chunks = 0","const BaoStep = require('./step');\nconst Context = require('./context');\n\nclass Bao {\n  constructor() {\n    this.context_ = new Context(BaoStep.createBaoStep);\n  }\n\n  /** Initialize bao with JSON data. */\n  parseString(json) {\n    const data = JSON.parse(json);\n    for (const stepJson of data) {\n      this.context_.setStep(stepJson['name'],\n                            BaoStep.createBaoStep(this.context_, stepJson));\n    }\n    return this;\n  }\n\n  /** Start bao flow. */\n  run() {\n    const current = this.context_.getStep('#begin');\n    current.run();\n  }\n}\n\n// Only exports bao runner.\nmodule.exports = {\n  runBao: function(json) {\n    new Bao().parseString(json).run();\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./bao.js","const Context = require('./context');\nconst BaseStep = require('./steps/base-step');\nconst IfStep = require('./steps/if-step');\nconst SwitchStep = require('./steps/switch-step');\nconst GotoStep = require('./steps/goto-step');\nconst ActionStep = require('./steps/action-step');\n\n/**\n * A factory method to create bao steps with appropriate subclasses.\n * @param {Context} context\n * @param {object} data\n * @return {BaoStep}\n */\nfunction createBaoStep(context, data) {\n  if (data['if']) {\n    const ifStep = new IfStep(context);\n    ifStep.parseJsonData(data);\n    return ifStep;\n  }\n  if (data['goto']) {\n    const gotoStep = new GotoStep(context);\n    gotoStep.parseJsonData(data);\n    return gotoStep;\n  }\n  if (data['next']) {\n    const actionStep = new ActionStep(context);\n    actionStep.parseJsonData(data);\n    return actionStep;\n  }\n  if (data['switch']) {\n    const switchStep = new SwitchStep(context);\n    switchStep.parseJsonData(data);\n    return switchStep;\n  }\n  const step = new BaseStep(context);\n  step.parseJsonData(data);\n  return step;\n}\n\nmodule.exports = {\n  // Export factory.\n  createBaoStep: createBaoStep\n};\n\n\n\n// WEBPACK FOOTER //\n// ./step.js","const Variable = require('./types/base-type');\nconst NumberVariable = require('./types/number-type');\nconst StringVariable = require('./types/string-type');\nconst BooleanVariable = require('./types/boolean-type');\nconst ArrayVariable = require('./types/array-type');\n/**\n * A factory to create a variable with name and type.\n * @param {string} name \n * @param {string} type one of number, string and boolean.\n * @return {Variable}\n */\nfunction createVariable(name, type) {\n  switch (type) {\n    case 'number':\n      return new NumberVariable(name);\n    case 'string':\n      return new StringVariable(name);\n    case 'boolean':\n      return new BoolVariable(name);\n    case 'array':\n      return new ArrayVariable(name);\n    default:\n      throw 'Unsupported type ' + type;\n  }\n}\n\nmodule.exports = {\n  createVariable: createVariable\n};\n\n\n\n// WEBPACK FOOTER //\n// ./variable.js","const Variable = require('./base-type');\n\nclass NumberVariable extends Variable {\n  /**\n   * Create a number variable.\n   * @param {string} name \n   */\n  constructor(name) {\n    super(name, 'number');\n  }\n\n  /**\n   * Convert string to number.\n   * @param {string} str e.g. '43.250', '250', 43e250', '0b1101', '0x1f',\n   *                          'NaN', 'Infinity'\n   * @override\n   */\n  parseString(str) {\n    if (str === 'NaN') {\n      return NaN;\n    }\n    val = Number(str);\n    // Unable to parse.\n    if (isNaN(val)) {\n      throw 'Invalid number ' + str;\n    }\n    return val;\n  }\n}\n\nmodule.exports = NumberVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/number-type.js","const Variable = require('./base-type');\n\nclass StringVariable extends Variable {\n  /**\n   * Create a string variable.\n   * @param {string} name \n   */\n  constructor(name) {\n    super(name, 'string');\n  }\n\n  /**\n   * @param {string} str\n   * @override\n   */\n  parseString(str) {\n    return str;\n  }\n}\n\nmodule.exports = StringVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/string-type.js","const Variable = require('./base-type');\n\nclass BooleanVariable extends Variable {\n  /**\n   * Create a boolean variable.\n   * @param {string} name \n   */\n  constructor(name) {\n    super(name, 'boolean');\n  }\n\n  /**\n   * Convert '0', '1', 'true', 'false' to boolean.\n   * @param {string} str\n   * @override\n   */\n  parseString(str) {\n    switch (str) {\n      case '1':\n      case 'true':\n        return true;\n      case '0':\n      case 'false':\n        return false;\n      default:\n        throw 'A boolean value must be either true or false (' + str + ')';\n    }\n  }\n}\n\nmodule.exports = BooleanVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/boolean-type.js","const Variable = require('./base-type');\n\nclass ArrayVariable extends Variable {\n  /**\n   * Create an array variable.\n   * @param {string} name\n   */\n  constructor(name) {\n    super(name, 'array');\n  }\n\n  /**\n   * Convert string to array.\n   * @param {string} str e.g. '[1,2,3]', '[\"1\",\"2\"]', '[[1,2],[3,4]]'\n   * @override\n   */\n  parseString(str) {\n    const arr = JSON.parse(str);\n    if (!Array.isArray(arr)) {\n      throw 'Invalid array ' + str;\n    }\n    return arr;\n  }  \n  /**\n   * Convert array to json string.\n   * @override\n   */\n  toString() {\n    return this.val_ && JSON.stringify(this.val_);\n  }\n}\n\nmodule.exports = ArrayVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/array-type.js","const Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that contains if clause. */\nclass IfStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'IfStep';\n    this.condition_ = undefined;\n    this.thenStep_ = undefined;\n    this.elseStep_ = undefined;\n  }\n\n  /**\n   * Parse an IfStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['if'] || !data['if']['condition'] || !data['if']['then']) {\n      throw 'Invalid if step';\n    }\n    this.condition_ = data['if']['condition'];\n    this.thenStep_ = this.baoStepFactory_(this.context_, data['if']['then']);\n    // Optional else clause.\n    if (data['if']['else']) {\n      this.elseStep_ = this.baoStepFactory_(this.context_, data['if']['else']);\n    }\n  }\n\n  /**\n   * If step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.condition_ || !this.thenStep_) {\n      throw 'Invalid if step';\n    }\n    if (this.context_.eval(this.condition_)) {\n      return this.thenStep_.run();\n    }\n    if (this.elseStep_) {\n      return this.elseStep_.run();\n    }\n    return null;\n  }\n}\n\nmodule.exports = IfStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/if-step.js","const Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that contains switch clause. */\nclass SwitchStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'SwitchStep';\n    this.expr_ = undefined;\n    this.cases_ = new Map();\n    this.defaultStep_ = undefined;\n  }\n\n  /**\n   * Parse a SwitchStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['switch'] || !data['switch']['expr'] || !data['switch']['cases']) {\n      throw 'Invalid switch step';\n    }\n    this.expr_ = data['switch']['expr'];\n    for (const [val, clause] of data['switch']['cases']) {\n      this.cases_.set(val, this.baoStepFactory_(this.context_, clause));\n    }\n\n    // Optional default clause.\n    if (data['switch']['default']) {\n      this.defaultStep_ = this.baoStepFactory_(this.context_, data['switch']['default']);\n    }\n  }\n\n  /**\n   * Switch step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.expr_ || !this.cases_) {\n      throw 'Invalid switch step';\n    }\n    const exprVal = this.context_.eval(this.expr_);\n    const clause = this.cases_.get(exprVal);\n    if (clause) {\n      return clause.run();\n    }\n    if (this.defaultStep_) {\n      return this.defaultStep_.run();\n    }\n    return null;\n  }\n}\n\nmodule.exports = SwitchStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/switch-step.js","const Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that contains goto clause. */\nclass GotoStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'GotoStep';\n    // The **name** of goto step.\n    this.goto_ = undefined;\n  }\n\n  /**\n   * Parse an GotoStep\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['goto']) {\n      throw 'Invalid goto step';\n    }\n    this.goto_ = data['goto'];\n  }\n\n  /**\n   * Goto step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.goto_ || !this.context_.getStep(this.goto_)) {\n      throw 'Invalid goto step';\n    }\n    return this.context_.getStep(this.goto_).run();\n  }\n}\n\nmodule.exports =  GotoStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/goto-step.js","const $ = require('jquery');\nconst Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that waits on UI click actions. */\nclass ActionStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'ActionStep';\n    // Next steps.\n    this.nextSteps_ = new Map();\n  }\n\n  /**\n   * Parse an ActionStep\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['next']) {\n      throw 'Invalid action step';\n    }\n    if (data['next']) {\n      for (const action in data['next']) {\n        // Create an anonymous step.\n        const next = this.baoStepFactory_(this.context_, data['next'][action]);\n        this.nextSteps_.set(action, next);\n      }\n    }\n  }\n\n  /**\n   * Action step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    // Register click handler.\n    for (const [action, next] of this.nextSteps_) {\n      $('[data-bao-action=\"' + action + '\"]')\n          .prop('disabled', false)\n          .click([this.context_, next], function(e) {\n            const context = e.data[0];\n            context.sync();\n            const next = e.data[1];\n            next.run();\n          });\n    }\n    return null;\n  }\n}\n\nmodule.exports = ActionStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/action-step.js"],"sourceRoot":""}