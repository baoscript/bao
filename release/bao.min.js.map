{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///bao.min.js","webpack:///webpack/bootstrap 276ded977ccba0d069d6","webpack:///external \"jQuery\"","webpack:///./context.js","webpack:///./bao.js","webpack:///./step.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","length","err","Array","isArray","_typeof","obj","constructor","_createClass","defineProperties","target","props","descriptor","writable","key","protoProps","staticProps","$","evalWithContext","context","expr","Function","getVarContext","Variable","name_","val_","updateDomElements_","val","sync","el","eval","e","Context","vars_","Map","steps_","baoStep","set","hasVar","maybeDeclareVar","setVal","has","varContext","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_step$value","getVal","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_step2$value","BaoStep","Bao","context_","json","data","JSON","parse","stepJson","setStep","createBaoStep","getStep","run","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_get","receiver","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","baoContext","type_","print_","init_","set_","varName","setVar","off","prop","console","log","getType","setVars_","ifStep","IfStep","parseJsonData","gotoStep","GotoStep","actionStep","ActionStep","switchStep","SwitchStep","step","_BaoStep","_this","condition_","thenStep_","elseStep_","_BaoStep2","_this2","expr_","cases_","defaultStep_","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_step3$value","clause","exprVal","_BaoStep3","_this3","goto_","_BaoStep4","_this4","nextSteps_","action","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_step4$value","registerButton_","click"],"mappings":"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","file":"bao.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bao\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Bao\"] = factory(root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bao\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Bao\"] = factory(root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar $ = __webpack_require__(0);\n\n/**\n * Eval an expression with context.\n * @param {Context} context \n * @param {string} expr \n */\nvar evalWithContext = function evalWithContext(context, expr) {\n  return new Function('with(this){return ' + expr + '}').call(context.getVarContext());\n};\n\nvar Variable = function () {\n  /**\n   * Create a variable with name.\n   * @param {string} name \n   */\n  function Variable(name) {\n    _classCallCheck(this, Variable);\n\n    this.name_ = name;\n    this.val_ = null;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Set the value of variable. It takes either a literal or\n   * an expression object, e.g. {'expr': 'a+b'}.\n   * @param {string|object} val \n   * @param {Context} context \n   */\n\n\n  _createClass(Variable, [{\n    key: 'setVal',\n    value: function setVal(val, context) {\n      // We only eval expression here.\n      if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object' && val['expr']) {\n        this.val_ = evalWithContext(context, val['expr']);\n      } else {\n        this.val_ = val;\n      }\n      this.updateDomElements_();\n    }\n\n    /**\n     * Get the value of variable.\n     */\n\n  }, {\n    key: 'getVal',\n    value: function getVal() {\n      return this.val_;\n    }\n\n    /** \n     * Update the value of corresponding DOM element with this variable.\n     * @private\n     */\n\n  }, {\n    key: 'updateDomElements_',\n    value: function updateDomElements_() {\n      var el = $('[data-bao-target=\"' + this.name_ + '\"]');\n      el.val(this.val_);\n    }\n\n    /**\n     * Update the value with corresponding DOM element.\n     */\n\n  }, {\n    key: 'sync',\n    value: function sync() {\n      var el = $('[data-bao-target=\"' + this.name_ + '\"]');\n      try {\n        // Try to parse types, otherwise treat as a string literal.\n        this.val_ = eval(el.val());\n      } catch (e) {\n        this.val_ = el.val();\n      }\n    }\n  }]);\n\n  return Variable;\n}();\n\nvar Context = function () {\n  /**\n   * Create Bao context.\n   */\n  function Context() {\n    _classCallCheck(this, Context);\n\n    this.vars_ = new Map();\n    this.steps_ = new Map();\n  }\n\n  /**\n   * Get the step with name.\n   * @param {string} name \n   */\n\n\n  _createClass(Context, [{\n    key: 'getStep',\n    value: function getStep(name) {\n      return this.steps_.get(name);\n    }\n\n    /**\n     * Set the step with JSON data.\n     * @param {string} name \n     * @param {BaoStep} baoStep \n     */\n\n  }, {\n    key: 'setStep',\n    value: function setStep(name, baoStep) {\n      this.steps_.set(name, baoStep);\n    }\n\n    /**\n     * Declare a variable if it doesn't exist.\n     * @param {string} name \n     */\n\n  }, {\n    key: 'maybeDeclareVar',\n    value: function maybeDeclareVar(name) {\n      if (!this.hasVar(name)) {\n        this.vars_.set(name, new Variable(name));\n      }\n    }\n\n    /**\n     * Get variable by name.\n     * @param {string} name \n     * @return {Variable}\n     */\n\n  }, {\n    key: 'getVar',\n    value: function getVar(name) {\n      return this.vars_.get(name);\n    }\n\n    /**\n     * Set value of the variable. Declare one if it doesn't exist.\n     * @param {string} name \n     * @param {string|object} val \n     */\n\n  }, {\n    key: 'setVar',\n    value: function setVar(name, val) {\n      this.maybeDeclareVar(name);\n      this.vars_.get(name).setVal(val, this);\n    }\n\n    /**\n     * Tell if a variable has been declared.\n     * @param {string} name \n     */\n\n  }, {\n    key: 'hasVar',\n    value: function hasVar(name) {\n      return this.vars_.has(name);\n    }\n\n    /** Return a js object with mapping of variable name to value. */\n\n  }, {\n    key: 'getVarContext',\n    value: function getVarContext() {\n      var varContext = {};\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.vars_[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              name = _step$value[0],\n              val = _step$value[1];\n\n          varContext[name] = val.getVal();\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return varContext;\n    }\n\n    /** Update all variables with DOM elements. */\n\n  }, {\n    key: 'sync',\n    value: function sync() {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.vars_[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _step2$value = _slicedToArray(_step2.value, 2),\n              name = _step2$value[0],\n              val = _step2$value[1];\n\n          val.sync();\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n  }]);\n\n  return Context;\n}();\n\nmodule.exports = {\n  // Export class Context.\n  Context: Context,\n  // Export eval.\n  evalWithContext: evalWithContext\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar $ = __webpack_require__(0);\nvar BaoStep = __webpack_require__(3);\nvar Context = __webpack_require__(1).Context;\n\nvar Bao = function () {\n  function Bao() {\n    _classCallCheck(this, Bao);\n\n    this.context_ = new Context();\n  }\n\n  /** Initialize bao with JSON data. */\n\n\n  _createClass(Bao, [{\n    key: 'parseString',\n    value: function parseString(json) {\n      var data = JSON.parse(json);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var stepJson = _step.value;\n\n          this.context_.setStep(stepJson['name'], BaoStep.createBaoStep(this.context_, stepJson));\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    }\n\n    /** Start bao flow. */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      var current = this.context_.getStep('#begin');\n      current.run();\n    }\n  }]);\n\n  return Bao;\n}();\n\nmodule.exports = Bao;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar $ = __webpack_require__(0);\nvar baoContext = __webpack_require__(1);\nvar Context = baoContext.Context;\n\n/** A base class for a step abstraction in bao. */\n\nvar BaoStep = function () {\n  function BaoStep(context) {\n    _classCallCheck(this, BaoStep);\n\n    // Type of the step. One of BaoStep, IfStep, GotoStep, ActionStep.\n    this.type_ = 'BaoStep';\n    // Context\n    this.context_ = context;\n    // Step name\n    this.name_ = undefined;\n    // console.log\n    this.print_ = undefined;\n    // Init while entering, another step.\n    this.init_ = undefined;\n    // Setters of this step\n    this.set_ = new Map();\n  }\n\n  /**\n   * A factory method to create bao steps with correct subclasses.\n   * @param {Context} context\n   * @param {object} data\n   * @return {BaoStep}\n   */\n\n\n  _createClass(BaoStep, [{\n    key: 'getType',\n\n\n    /** Get step type. */\n    value: function getType() {\n      return this.type_;\n    }\n\n    /** Get step name. */\n\n  }, {\n    key: 'getName',\n    value: function getName() {\n      return this.name_;\n    }\n\n    /**\n     * Initialize step with JSON data.\n     * @param {object} data \n     */\n\n  }, {\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      if (data) {\n        // Set step name.\n        this.name_ = data['name'];\n        // Set init step.\n        if (data['init']) {\n          // Anonymous step.\n          this.init_ = BaoStep.create(this.context_, data['init']);\n        }\n        // print, literal only.\n        if (data['print'] !== undefined) {\n          this.print_ = data['print'];\n        }\n        if (data['decl']) {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = data['decl'][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var varName = _step.value;\n\n              // Vars decl.\n              this.context_.maybeDeclareVar(varName);\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        }\n        // Set setlist.\n        if (data['set']) for (var _varName in data['set']) {\n          this.set_.set(_varName, data['set'][_varName]);\n        }\n      }\n    }\n\n    /** \n     * Run the setter step.\n     * @private\n     */\n\n  }, {\n    key: 'setVars_',\n    value: function setVars_() {\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.set_[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var _step2$value = _slicedToArray(_step2.value, 2),\n              name = _step2$value[0],\n              val = _step2$value[1];\n\n          this.context_.setVar(name, val);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    }\n\n    /** Run the step. */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      // Remove all registered click handlers first.\n      $('[data-bao-action]').off('click').prop('disabled', true);\n      console.log('Current step: ' + this.name_ + ' (' + this.getType() + ')');\n      // Run init\n      if (this.init_) {\n        this.init_.run();\n      }\n      if (this.set_) {\n        this.setVars_();\n      }\n      if (this.print_ != undefined) {\n        console.log(this.print_);\n      }\n      return null;\n    }\n  }], [{\n    key: 'create',\n    value: function create(context, data) {\n      if (data['if']) {\n        var ifStep = new IfStep(context);\n        ifStep.parseJsonData(data);\n        return ifStep;\n      }\n      if (data['goto']) {\n        var gotoStep = new GotoStep(context);\n        gotoStep.parseJsonData(data);\n        return gotoStep;\n      }\n      if (data['next']) {\n        var actionStep = new ActionStep(context);\n        actionStep.parseJsonData(data);\n        return actionStep;\n      }\n      if (data['switch']) {\n        var switchStep = new SwitchStep(context);\n        switchStep.parseJsonData(data);\n        return switchStep;\n      }\n      var step = new BaoStep(context);\n      step.parseJsonData(data);\n      return step;\n    }\n  }]);\n\n  return BaoStep;\n}();\n\n/** A step that contains if clause. */\n\n\nvar IfStep = function (_BaoStep) {\n  _inherits(IfStep, _BaoStep);\n\n  function IfStep(context, name) {\n    _classCallCheck(this, IfStep);\n\n    var _this = _possibleConstructorReturn(this, (IfStep.__proto__ || Object.getPrototypeOf(IfStep)).call(this, context, name));\n\n    _this.type_ = 'IfStep';\n    _this.condition_ = undefined;\n    _this.thenStep_ = undefined;\n    _this.elseStep_ = undefined;\n    return _this;\n  }\n\n  /**\n   * Parse an IfStep.\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(IfStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(IfStep.prototype.__proto__ || Object.getPrototypeOf(IfStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['if'] || !data['if']['condition'] || !data['if']['then']) {\n        throw 'Invalid if step';\n      }\n      this.condition_ = data['if']['condition'];\n      this.thenStep_ = BaoStep.create(this.context_, data['if']['then']);\n      // Optional else clause.\n      if (data['if']['else']) {\n        this.elseStep_ = BaoStep.create(this.context_, data['if']['else']);\n      }\n    }\n\n    /**\n     * If step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(IfStep.prototype.__proto__ || Object.getPrototypeOf(IfStep.prototype), 'run', this).call(this);\n      if (!this.condition_ || !this.thenStep_) {\n        throw 'Invalid if step';\n      }\n      if (baoContext.evalWithContext(this.context_, this.condition_)) {\n        return this.thenStep_.run();\n      }\n      if (this.elseStep_) {\n        return this.elseStep_.run();\n      }\n      return null;\n    }\n  }]);\n\n  return IfStep;\n}(BaoStep);\n\n/** A step that contains switch clause. */\n\n\nvar SwitchStep = function (_BaoStep2) {\n  _inherits(SwitchStep, _BaoStep2);\n\n  function SwitchStep(context, name) {\n    _classCallCheck(this, SwitchStep);\n\n    var _this2 = _possibleConstructorReturn(this, (SwitchStep.__proto__ || Object.getPrototypeOf(SwitchStep)).call(this, context, name));\n\n    _this2.type_ = 'SwitchStep';\n    _this2.expr_ = undefined;\n    _this2.cases_ = new Map();\n    _this2.defaultStep_ = undefined;\n    return _this2;\n  }\n\n  /**\n   * Parse a SwitchStep.\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(SwitchStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(SwitchStep.prototype.__proto__ || Object.getPrototypeOf(SwitchStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['switch'] || !data['switch']['expr'] || !data['switch']['cases']) {\n        throw 'Invalid switch step';\n      }\n      this.expr_ = data['switch']['expr'];\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = data['switch']['cases'][Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var _step3$value = _slicedToArray(_step3.value, 2),\n              val = _step3$value[0],\n              clause = _step3$value[1];\n\n          this.cases_.set(val, BaoStep.create(this.context_, clause));\n        }\n\n        // Optional default clause.\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n\n      if (data['switch']['default']) {\n        this.defaultStep_ = BaoStep.create(this.context_, data['switch']['default']);\n      }\n    }\n\n    /**\n     * Switch step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(SwitchStep.prototype.__proto__ || Object.getPrototypeOf(SwitchStep.prototype), 'run', this).call(this);\n      if (!this.expr_ || !this.cases_) {\n        throw 'Invalid switch step';\n      }\n      var exprVal = baoContext.evalWithContext(this.context_, this.expr_);\n      var clause = this.cases_.get(exprVal);\n      if (clause) {\n        return clause.run();\n      }\n      if (this.defaultStep_) {\n        return this.defaultStep_.run();\n      }\n      return null;\n    }\n  }]);\n\n  return SwitchStep;\n}(BaoStep);\n\n/** A step that contains goto clause. */\n\n\nvar GotoStep = function (_BaoStep3) {\n  _inherits(GotoStep, _BaoStep3);\n\n  function GotoStep(context, name) {\n    _classCallCheck(this, GotoStep);\n\n    var _this3 = _possibleConstructorReturn(this, (GotoStep.__proto__ || Object.getPrototypeOf(GotoStep)).call(this, context, name));\n\n    _this3.type_ = 'GotoStep';\n    // The **name** of goto step.\n    _this3.goto_ = undefined;\n    return _this3;\n  }\n\n  /**\n   * Parse an GotoStep。\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(GotoStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(GotoStep.prototype.__proto__ || Object.getPrototypeOf(GotoStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['goto']) {\n        throw 'Invalid goto step';\n      }\n      this.goto_ = data['goto'];\n    }\n\n    /**\n     * Goto step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(GotoStep.prototype.__proto__ || Object.getPrototypeOf(GotoStep.prototype), 'run', this).call(this);\n      if (!this.goto_ || !this.context_.getStep(this.goto_)) {\n        throw 'Invalid goto step';\n      }\n      return this.context_.getStep(this.goto_).run();\n    }\n  }]);\n\n  return GotoStep;\n}(BaoStep);\n\n/** A step that waits on UI click actions. */\n\n\nvar ActionStep = function (_BaoStep4) {\n  _inherits(ActionStep, _BaoStep4);\n\n  function ActionStep(context, name) {\n    _classCallCheck(this, ActionStep);\n\n    var _this4 = _possibleConstructorReturn(this, (ActionStep.__proto__ || Object.getPrototypeOf(ActionStep)).call(this, context, name));\n\n    _this4.type_ = 'ActionStep';\n    // Next steps.\n    _this4.nextSteps_ = new Map();\n    return _this4;\n  }\n\n  /**\n   * Parse an ActionStep。\n   * @param {object} data \n   * @override\n   */\n\n\n  _createClass(ActionStep, [{\n    key: 'parseJsonData',\n    value: function parseJsonData(data) {\n      _get(ActionStep.prototype.__proto__ || Object.getPrototypeOf(ActionStep.prototype), 'parseJsonData', this).call(this, data);\n      if (!data['next']) {\n        throw 'Invalid action step';\n      }\n      if (data['next']) {\n        for (var action in data['next']) {\n          // Create an anonymous step.\n          var next = BaoStep.create(this.context_, data['next'][action]);\n          this.nextSteps_.set(action, next);\n        }\n      }\n    }\n\n    /**\n     * Action step implementation.\n     * @override\n     */\n\n  }, {\n    key: 'run',\n    value: function run() {\n      _get(ActionStep.prototype.__proto__ || Object.getPrototypeOf(ActionStep.prototype), 'run', this).call(this);\n      // Register click handler.\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.nextSteps_[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var _step4$value = _slicedToArray(_step4.value, 2),\n              action = _step4$value[0],\n              next = _step4$value[1];\n\n          this.registerButton_(action, next);\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return null;\n    }\n\n    /**\n     * Register click handler for next steps.\n     * @param {string} action \n     * @param {BaoStep} next \n     * @private\n     */\n\n  }, {\n    key: 'registerButton_',\n    value: function registerButton_(action, next) {\n      $('[data-bao-action=\"' + action + '\"]').prop('disabled', false);\n      $('[data-bao-action=\"' + action + '\"]').click([this.context_, next], function (e) {\n        var context = e.data[0];\n        context.sync();\n        var next = e.data[1];\n        next.run();\n      });\n    }\n  }]);\n\n  return ActionStep;\n}(BaoStep);\n\nmodule.exports = {\n  // Export factory.\n  createBaoStep: BaoStep.create\n};\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// bao.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 276ded977ccba0d069d6","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0","const $ = require('jquery');\n\n/**\n * Eval an expression with context.\n * @param {Context} context \n * @param {string} expr \n */\nconst evalWithContext = function(context, expr) {\n  return (new Function('with(this){return ' + expr + '}')).call(context.getVarContext());\n};\n\nclass Variable {\n  /**\n   * Create a variable with name.\n   * @param {string} name \n   */\n  constructor(name) {\n    this.name_ = name;\n    this.val_ = null;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Set the value of variable. It takes either a literal or\n   * an expression object, e.g. {'expr': 'a+b'}.\n   * @param {string|object} val \n   * @param {Context} context \n   */\n  setVal(val, context) {\n    // We only eval expression here.\n    if (typeof val === 'object' && val['expr']) {\n      this.val_ = evalWithContext(context, val['expr']);\n    } else {\n      this.val_ = val;\n    }\n    this.updateDomElements_();\n  }\n\n  /**\n   * Get the value of variable.\n   */\n  getVal() {\n    return this.val_;\n  }\n\n  /** \n   * Update the value of corresponding DOM element with this variable.\n   * @private\n   */\n  updateDomElements_() {\n    const el = $('[data-bao-target=\"' + this.name_ + '\"]');\n    el.val(this.val_);\n  }\n\n  /**\n   * Update the value with corresponding DOM element.\n   */\n  sync() {\n    const el = $('[data-bao-target=\"' + this.name_ + '\"]');\n    try {\n      // Try to parse types, otherwise treat as a string literal.\n      this.val_ = eval(el.val());\n    } catch (e) {\n      this.val_ = el.val();\n    }\n  }\n}\n\nclass Context {\n  /**\n   * Create Bao context.\n   */\n  constructor() {\n    this.vars_ = new Map();\n    this.steps_ = new Map();\n  }\n\n\n  /**\n   * Get the step with name.\n   * @param {string} name \n   */\n  getStep(name) {\n    return this.steps_.get(name);\n  }\n\n  /**\n   * Set the step with JSON data.\n   * @param {string} name \n   * @param {BaoStep} baoStep \n   */\n  setStep(name, baoStep) {\n    this.steps_.set(name, baoStep);\n  }\n\n  /**\n   * Declare a variable if it doesn't exist.\n   * @param {string} name \n   */\n  maybeDeclareVar(name) {\n    if (!this.hasVar(name)) {\n      this.vars_.set(name, new Variable(name));\n    }\n  }\n\n  /**\n   * Get variable by name.\n   * @param {string} name \n   * @return {Variable}\n   */\n  getVar(name) {\n    return this.vars_.get(name);\n  }\n\n  /**\n   * Set value of the variable. Declare one if it doesn't exist.\n   * @param {string} name \n   * @param {string|object} val \n   */\n  setVar(name, val) {\n    this.maybeDeclareVar(name);\n    this.vars_.get(name).setVal(val, this);\n  }\n\n  /**\n   * Tell if a variable has been declared.\n   * @param {string} name \n   */\n  hasVar(name) {\n    return this.vars_.has(name);\n  }\n\n  /** Return a js object with mapping of variable name to value. */\n  getVarContext() {\n    const varContext = {};\n    for (const [name, val] of this.vars_) {\n      varContext[name] = val.getVal();\n    }\n    return varContext;\n  }\n\n  /** Update all variables with DOM elements. */\n  sync() {\n    for (const [name, val] of this.vars_) {\n      val.sync();\n    }\n  }\n}\n\nmodule.exports = {\n  // Export class Context.\n  Context: Context,\n  // Export eval.\n  evalWithContext: evalWithContext\n};\n\n\n\n// WEBPACK FOOTER //\n// ./context.js","const $ = require('jquery');\nconst BaoStep = require('./step.js');\nconst Context = require('./context.js').Context;\n\nclass Bao {\n  constructor() {\n    this.context_ = new Context();\n  }\n\n  /** Initialize bao with JSON data. */\n  parseString(json) {\n    const data = JSON.parse(json);\n    for (const stepJson of data) {\n      this.context_.setStep(stepJson['name'],\n                            BaoStep.createBaoStep(this.context_, stepJson));\n    }\n  }\n\n  /** Start bao flow. */\n  run() {\n    const current = this.context_.getStep('#begin');\n    current.run();\n  }\n}\n\nmodule.exports = Bao;\n\n\n\n// WEBPACK FOOTER //\n// ./bao.js","const $ = require('jquery');\nconst baoContext = require('./context.js');\nconst Context = baoContext.Context;\n\n/** A base class for a step abstraction in bao. */\nclass BaoStep {\n  constructor(context) {\n    // Type of the step. One of BaoStep, IfStep, GotoStep, ActionStep.\n    this.type_ = 'BaoStep';\n    // Context\n    this.context_ = context;\n    // Step name\n    this.name_ = undefined;\n    // console.log\n    this.print_ = undefined;\n    // Init while entering, another step.\n    this.init_ = undefined;\n    // Setters of this step\n    this.set_ = new Map();\n  }\n\n  /**\n   * A factory method to create bao steps with correct subclasses.\n   * @param {Context} context\n   * @param {object} data\n   * @return {BaoStep}\n   */\n  static create(context, data) {\n    if (data['if']) {\n      const ifStep = new IfStep(context);\n      ifStep.parseJsonData(data);\n      return ifStep;\n    }\n    if (data['goto']) {\n      const gotoStep = new GotoStep(context);\n      gotoStep.parseJsonData(data);\n      return gotoStep;\n    }\n    if (data['next']) {\n      const actionStep = new ActionStep(context);\n      actionStep.parseJsonData(data);\n      return actionStep;\n    }\n    if (data['switch']) {\n      const switchStep = new SwitchStep(context);\n      switchStep.parseJsonData(data);\n      return switchStep;\n    }\n    const step = new BaoStep(context);\n    step.parseJsonData(data);\n    return step;\n  }\n\n  /** Get step type. */\n  getType() {\n    return this.type_;\n  }\n\n  /** Get step name. */\n  getName() {\n    return this.name_;\n  }\n\n  /**\n   * Initialize step with JSON data.\n   * @param {object} data \n   */\n  parseJsonData(data) {\n    if (data) {\n      // Set step name.\n      this.name_ = data['name'];\n      // Set init step.\n      if (data['init']) {\n        // Anonymous step.\n        this.init_ = BaoStep.create(this.context_, data['init']);\n      }\n      // print, literal only.\n      if (data['print'] !== undefined) {\n        this.print_ = data['print'];\n      }\n      if (data['decl']) {\n        for (const varName of data['decl']) {\n          // Vars decl.\n          this.context_.maybeDeclareVar(varName);\n        }\n      }\n      // Set setlist.\n      if (data['set'])\n      for (const varName in data['set']) {\n        this.set_.set(varName, data['set'][varName]);\n      }\n    }\n  }\n\n  /** \n   * Run the setter step.\n   * @private\n   */\n  setVars_() {\n    for (const [name, val] of this.set_) {\n      this.context_.setVar(name, val);\n    }\n  }\n\n  /** Run the step. */\n  run() {\n    // Remove all registered click handlers first.\n    $('[data-bao-action]').off('click').prop('disabled', true);\n    console.log('Current step: ' + this.name_ + ' (' + this.getType() + ')');\n    // Run init\n    if (this.init_) {\n      this.init_.run();\n    }\n    if (this.set_) {\n      this.setVars_();\n    }\n    if (this.print_ != undefined) {\n      console.log(this.print_);\n    }\n    return null;\n  }\n\n}\n\n/** A step that contains if clause. */\nclass IfStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'IfStep';\n    this.condition_ = undefined;\n    this.thenStep_ = undefined;\n    this.elseStep_ = undefined;\n  }\n\n  /**\n   * Parse an IfStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['if'] || !data['if']['condition'] || !data['if']['then']) {\n      throw 'Invalid if step';\n    }\n    this.condition_ = data['if']['condition'];\n    this.thenStep_ = BaoStep.create(this.context_, data['if']['then']);\n    // Optional else clause.\n    if (data['if']['else']) {\n      this.elseStep_ = BaoStep.create(this.context_, data['if']['else']);\n    }\n  }\n\n  /**\n   * If step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.condition_ || !this.thenStep_) {\n      throw 'Invalid if step';\n    }\n    if (baoContext.evalWithContext(this.context_, this.condition_)) {\n      return this.thenStep_.run();\n    }\n    if (this.elseStep_) {\n      return this.elseStep_.run();\n    }\n    return null;\n  }\n}\n\n/** A step that contains switch clause. */\nclass SwitchStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'SwitchStep';\n    this.expr_ = undefined;\n    this.cases_ = new Map();\n    this.defaultStep_ = undefined;\n  }\n\n  /**\n   * Parse a SwitchStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['switch'] || !data['switch']['expr'] || !data['switch']['cases']) {\n      throw 'Invalid switch step';\n    }\n    this.expr_ = data['switch']['expr'];\n    for (const [val, clause] of data['switch']['cases']) {\n      this.cases_.set(val, BaoStep.create(this.context_, clause));\n    }\n\n    // Optional default clause.\n    if (data['switch']['default']) {\n      this.defaultStep_ = BaoStep.create(this.context_, data['switch']['default']);\n    }\n  }\n\n  /**\n   * Switch step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.expr_ || !this.cases_) {\n      throw 'Invalid switch step';\n    }\n    const exprVal = baoContext.evalWithContext(this.context_, this.expr_);\n    const clause = this.cases_.get(exprVal);\n    if (clause) {\n      return clause.run();\n    }\n    if (this.defaultStep_) {\n      return this.defaultStep_.run();\n    }\n    return null;\n  }\n}\n\n/** A step that contains goto clause. */\nclass GotoStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'GotoStep';\n    // The **name** of goto step.\n    this.goto_ = undefined;\n  }\n\n  /**\n   * Parse an GotoStep。\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['goto']) {\n      throw 'Invalid goto step';\n    }\n    this.goto_ = data['goto'];\n  }\n\n  /**\n   * Goto step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.goto_ || !this.context_.getStep(this.goto_)) {\n      throw 'Invalid goto step';\n    }\n    return this.context_.getStep(this.goto_).run();\n  }\n}\n\n/** A step that waits on UI click actions. */\nclass ActionStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'ActionStep';\n    // Next steps.\n    this.nextSteps_ = new Map();\n  }\n\n  /**\n   * Parse an ActionStep。\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['next']) {\n      throw 'Invalid action step';\n    }\n    if (data['next']) {\n      for (const action in data['next']) {\n        // Create an anonymous step.\n        const next = BaoStep.create(this.context_, data['next'][action]);\n        this.nextSteps_.set(action, next);\n      }\n    }\n  }\n\n  /**\n   * Action step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    // Register click handler.\n    for (const [action, next] of this.nextSteps_) {\n      this.registerButton_(action, next);\n    }\n    return null;\n  }\n\n  /**\n   * Register click handler for next steps.\n   * @param {string} action \n   * @param {BaoStep} next \n   * @private\n   */\n  registerButton_(action, next) {\n    $('[data-bao-action=\"' + action + '\"]').prop('disabled', false);\n    $('[data-bao-action=\"' + action + '\"]').click([this.context_, next], function(e) {\n      const context = e.data[0];\n      context.sync();\n      const next = e.data[1];\n      next.run();\n    });\n  }\n}\n\nmodule.exports = {\n  // Export factory.\n  createBaoStep: BaoStep.create\n};\n\n\n\n// WEBPACK FOOTER //\n// ./step.js"],"sourceRoot":""}