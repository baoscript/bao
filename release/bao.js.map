{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 259a4738788bbd2266ec","webpack:///external \"jQuery\"","webpack:///./context.js","webpack:///./bao.js","webpack:///./step.js"],"names":["$","require","evalWithContext","context","expr","Function","call","getVarContext","Variable","name","name_","val_","updateDomElements_","val","el","eval","e","Context","vars_","Map","steps_","get","baoStep","set","hasVar","maybeDeclareVar","setVal","has","varContext","getVal","sync","module","exports","BaoStep","Bao","context_","json","data","JSON","parse","stepJson","setStep","createBaoStep","current","getStep","run","baoContext","type_","undefined","print_","init_","set_","create","varName","setVar","off","prop","console","log","getType","setVars_","ifStep","IfStep","parseJsonData","gotoStep","GotoStep","actionStep","ActionStep","switchStep","SwitchStep","step","condition_","thenStep_","elseStep_","expr_","cases_","defaultStep_","clause","exprVal","goto_","nextSteps_","action","next","registerButton_","click"],"mappings":"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","file":"bao.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bao\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Bao\"] = factory(root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 259a4738788bbd2266ec","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = 0","const $ = require('jquery');\n\n/**\n * Eval an expression with context.\n * @param {Context} context \n * @param {string} expr \n */\nconst evalWithContext = function(context, expr) {\n  return (new Function('with(this){return ' + expr + '}')).call(context.getVarContext());\n};\n\nclass Variable {\n  /**\n   * Create a variable with name.\n   * @param {string} name \n   */\n  constructor(name) {\n    this.name_ = name;\n    this.val_ = null;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Set the value of variable. It takes either a literal or\n   * an expression object, e.g. {'expr': 'a+b'}.\n   * @param {string|object} val \n   * @param {Context} context \n   */\n  setVal(val, context) {\n    // We only eval expression here.\n    if (typeof val === 'object' && val['expr']) {\n      this.val_ = evalWithContext(context, val['expr']);\n    } else {\n      this.val_ = val;\n    }\n    this.updateDomElements_();\n  }\n\n  /**\n   * Get the value of variable.\n   */\n  getVal() {\n    return this.val_;\n  }\n\n  /** \n   * Update the value of corresponding DOM element with this variable.\n   * @private\n   */\n  updateDomElements_() {\n    const el = $('[data-bao-target=\"' + this.name_ + '\"]');\n    el.val(this.val_);\n  }\n\n  /**\n   * Update the value with corresponding DOM element.\n   */\n  sync() {\n    const el = $('[data-bao-target=\"' + this.name_ + '\"]');\n    try {\n      // Try to parse types, otherwise treat as a string literal.\n      this.val_ = eval(el.val());\n    } catch (e) {\n      this.val_ = el.val();\n    }\n  }\n}\n\nclass Context {\n  /**\n   * Create Bao context.\n   */\n  constructor() {\n    this.vars_ = new Map();\n    this.steps_ = new Map();\n  }\n\n\n  /**\n   * Get step by name.\n   * @param {string} name \n   */\n  getStep(name) {\n    return this.steps_.get(name);\n  }\n\n  /**\n   * Set the step with JSON data.\n   * @param {string} name \n   * @param {BaoStep} baoStep \n   */\n  setStep(name, baoStep) {\n    this.steps_.set(name, baoStep);\n  }\n\n  /**\n   * Declare a variable if it doesn't exist.\n   * @param {string} name \n   */\n  maybeDeclareVar(name) {\n    if (!this.hasVar(name)) {\n      this.vars_.set(name, new Variable(name));\n    }\n  }\n\n  /**\n   * Get variable by name.\n   * @param {string} name \n   * @return {Variable}\n   */\n  getVar(name) {\n    return this.vars_.get(name);\n  }\n\n  /**\n   * Set value of the variable. Declare one if it doesn't exist.\n   * @param {string} name \n   * @param {string|object} val \n   */\n  setVar(name, val) {\n    this.maybeDeclareVar(name);\n    this.vars_.get(name).setVal(val, this);\n  }\n\n  /**\n   * Tell if a variable has been declared.\n   * @param {string} name \n   */\n  hasVar(name) {\n    return this.vars_.has(name);\n  }\n\n  /** Return a js object with mapping of variable name to value. */\n  getVarContext() {\n    const varContext = {};\n    for (const [name, val] of this.vars_) {\n      varContext[name] = val.getVal();\n    }\n    return varContext;\n  }\n\n  /** Update all variables with DOM elements. */\n  sync() {\n    for (const [name, val] of this.vars_) {\n      val.sync();\n    }\n  }\n}\n\nmodule.exports = {\n  // Export class Context.\n  Context: Context,\n  // Export eval.\n  evalWithContext: evalWithContext\n};\n\n\n\n// WEBPACK FOOTER //\n// ./context.js","const $ = require('jquery');\nconst BaoStep = require('./step.js');\nconst Context = require('./context.js').Context;\n\nclass Bao {\n  constructor() {\n    this.context_ = new Context();\n  }\n\n  /** Initialize bao with JSON data. */\n  parseString(json) {\n    const data = JSON.parse(json);\n    for (const stepJson of data) {\n      this.context_.setStep(stepJson['name'],\n                            BaoStep.createBaoStep(this.context_, stepJson));\n    }\n  }\n\n  /** Start bao flow. */\n  run() {\n    const current = this.context_.getStep('#begin');\n    current.run();\n  }\n}\n\nmodule.exports = Bao;\n\n\n\n// WEBPACK FOOTER //\n// ./bao.js","const $ = require('jquery');\nconst baoContext = require('./context.js');\nconst Context = baoContext.Context;\n\n/** A base class for a step abstraction in bao. */\nclass BaoStep {\n  constructor(context) {\n    // Type of the step. One of BaoStep, IfStep, GotoStep, ActionStep.\n    this.type_ = 'BaoStep';\n    // Context\n    this.context_ = context;\n    // Step name\n    this.name_ = undefined;\n    // console.log\n    this.print_ = undefined;\n    // Init while entering, another step.\n    this.init_ = undefined;\n    // Setters of this step\n    this.set_ = new Map();\n  }\n\n  /**\n   * A factory method to create bao steps with correct subclasses.\n   * @param {Context} context\n   * @param {object} data\n   * @return {BaoStep}\n   */\n  static create(context, data) {\n    if (data['if']) {\n      const ifStep = new IfStep(context);\n      ifStep.parseJsonData(data);\n      return ifStep;\n    }\n    if (data['goto']) {\n      const gotoStep = new GotoStep(context);\n      gotoStep.parseJsonData(data);\n      return gotoStep;\n    }\n    if (data['next']) {\n      const actionStep = new ActionStep(context);\n      actionStep.parseJsonData(data);\n      return actionStep;\n    }\n    if (data['switch']) {\n      const switchStep = new SwitchStep(context);\n      switchStep.parseJsonData(data);\n      return switchStep;\n    }\n    const step = new BaoStep(context);\n    step.parseJsonData(data);\n    return step;\n  }\n\n  /** Get step type. */\n  getType() {\n    return this.type_;\n  }\n\n  /** Get step name. */\n  getName() {\n    return this.name_;\n  }\n\n  /**\n   * Initialize step with JSON data.\n   * @param {object} data \n   */\n  parseJsonData(data) {\n    if (data) {\n      // Set step name.\n      this.name_ = data['name'];\n      // Set init step.\n      if (data['init']) {\n        // Anonymous step.\n        this.init_ = BaoStep.create(this.context_, data['init']);\n      }\n      // print, literal only.\n      if (data['print'] !== undefined) {\n        this.print_ = data['print'];\n      }\n      if (data['decl']) {\n        for (const varName of data['decl']) {\n          // Vars decl.\n          this.context_.maybeDeclareVar(varName);\n        }\n      }\n      // Set setlist.\n      if (data['set'])\n      for (const varName in data['set']) {\n        this.set_.set(varName, data['set'][varName]);\n      }\n    }\n  }\n\n  /** \n   * Run the setter step.\n   * @private\n   */\n  setVars_() {\n    for (const [name, val] of this.set_) {\n      this.context_.setVar(name, val);\n    }\n  }\n\n  /** Run the step. */\n  run() {\n    // Remove all registered click handlers first.\n    $('[data-bao-action]').off('click').prop('disabled', true);\n    console.log('Current step: ' + this.name_ + ' (' + this.getType() + ')');\n    // Run init\n    if (this.init_) {\n      this.init_.run();\n    }\n    if (this.set_) {\n      this.setVars_();\n    }\n    if (this.print_ != undefined) {\n      console.log(this.print_);\n    }\n    return null;\n  }\n\n}\n\n/** A step that contains if clause. */\nclass IfStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'IfStep';\n    this.condition_ = undefined;\n    this.thenStep_ = undefined;\n    this.elseStep_ = undefined;\n  }\n\n  /**\n   * Parse an IfStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['if'] || !data['if']['condition'] || !data['if']['then']) {\n      throw 'Invalid if step';\n    }\n    this.condition_ = data['if']['condition'];\n    this.thenStep_ = BaoStep.create(this.context_, data['if']['then']);\n    // Optional else clause.\n    if (data['if']['else']) {\n      this.elseStep_ = BaoStep.create(this.context_, data['if']['else']);\n    }\n  }\n\n  /**\n   * If step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.condition_ || !this.thenStep_) {\n      throw 'Invalid if step';\n    }\n    if (baoContext.evalWithContext(this.context_, this.condition_)) {\n      return this.thenStep_.run();\n    }\n    if (this.elseStep_) {\n      return this.elseStep_.run();\n    }\n    return null;\n  }\n}\n\n/** A step that contains switch clause. */\nclass SwitchStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'SwitchStep';\n    this.expr_ = undefined;\n    this.cases_ = new Map();\n    this.defaultStep_ = undefined;\n  }\n\n  /**\n   * Parse a SwitchStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['switch'] || !data['switch']['expr'] || !data['switch']['cases']) {\n      throw 'Invalid switch step';\n    }\n    this.expr_ = data['switch']['expr'];\n    for (const [val, clause] of data['switch']['cases']) {\n      this.cases_.set(val, BaoStep.create(this.context_, clause));\n    }\n\n    // Optional default clause.\n    if (data['switch']['default']) {\n      this.defaultStep_ = BaoStep.create(this.context_, data['switch']['default']);\n    }\n  }\n\n  /**\n   * Switch step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.expr_ || !this.cases_) {\n      throw 'Invalid switch step';\n    }\n    const exprVal = baoContext.evalWithContext(this.context_, this.expr_);\n    const clause = this.cases_.get(exprVal);\n    if (clause) {\n      return clause.run();\n    }\n    if (this.defaultStep_) {\n      return this.defaultStep_.run();\n    }\n    return null;\n  }\n}\n\n/** A step that contains goto clause. */\nclass GotoStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'GotoStep';\n    // The **name** of goto step.\n    this.goto_ = undefined;\n  }\n\n  /**\n   * Parse an GotoStep。\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['goto']) {\n      throw 'Invalid goto step';\n    }\n    this.goto_ = data['goto'];\n  }\n\n  /**\n   * Goto step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.goto_ || !this.context_.getStep(this.goto_)) {\n      throw 'Invalid goto step';\n    }\n    return this.context_.getStep(this.goto_).run();\n  }\n}\n\n/** A step that waits on UI click actions. */\nclass ActionStep extends BaoStep {\n  constructor(context, name) {\n    super(context, name);\n\n    this.type_ = 'ActionStep';\n    // Next steps.\n    this.nextSteps_ = new Map();\n  }\n\n  /**\n   * Parse an ActionStep。\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['next']) {\n      throw 'Invalid action step';\n    }\n    if (data['next']) {\n      for (const action in data['next']) {\n        // Create an anonymous step.\n        const next = BaoStep.create(this.context_, data['next'][action]);\n        this.nextSteps_.set(action, next);\n      }\n    }\n  }\n\n  /**\n   * Action step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    // Register click handler.\n    for (const [action, next] of this.nextSteps_) {\n      this.registerButton_(action, next);\n    }\n    return null;\n  }\n\n  /**\n   * Register click handler for next steps.\n   * @param {string} action \n   * @param {BaoStep} next \n   * @private\n   */\n  registerButton_(action, next) {\n    $('[data-bao-action=\"' + action + '\"]')\n        .prop('disabled', false)\n        .click([this.context_, next], function(e) {\n          const context = e.data[0];\n          context.sync();\n          const next = e.data[1];\n          next.run();\n        });\n  }\n}\n\nmodule.exports = {\n  // Export factory.\n  createBaoStep: BaoStep.create\n};\n\n\n\n// WEBPACK FOOTER //\n// ./step.js"],"sourceRoot":""}