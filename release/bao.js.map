{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ec4a61edcb6129cb14cc","webpack:///./context.js","webpack:///./types/base-type.js","webpack:///./steps/base-step.js","webpack:///external \"jQuery\"","webpack:///./bao.js","webpack:///./step.js","webpack:///./variable.js","webpack:///./types/number-type.js","webpack:///./types/string-type.js","webpack:///./types/boolean-type.js","webpack:///./types/array-type.js","webpack:///./steps/if-step.js","webpack:///./steps/switch-step.js","webpack:///./steps/goto-step.js","webpack:///./steps/action-step.js"],"names":["Variable","require","Context","baoStepFactory","baoStepFactory_","vars_","Map","steps_","name","get","baoStep","set","type","hasVar","createVariable","val","setVar","eval","maybeDeclareVar","setVal","has","varContext","getVal","expr","Function","call","getVarContext_","sync","module","exports","$","getType","e","Array","isArray","name_","val_","undefined","type_","updateDomElements_","prop","toString","parseString","str","BaoStep","context","context_","print_","init_","set_","getBaoStepFactory","data","varName","off","console","log","run","setVars_","Bao","createBaoStep","json","JSON","parse","stepJson","setStep","current","getStep","runBao","BaseStep","IfStep","SwitchStep","GotoStep","ActionStep","ifStep","parseJsonData","gotoStep","actionStep","switchStep","step","NumberVariable","StringVariable","BooleanVariable","ArrayVariable","BoolVariable","NaN","Number","isNaN","arr","stringify","condition_","thenStep_","elseStep_","expr_","cases_","defaultStep_","clause","exprVal","goto_","nextSteps_","action","next","click"],"mappings":"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","file":"bao.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bao\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Bao\"] = factory(root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ec4a61edcb6129cb14cc","const Variable = require('./variable');\n\nclass Context {\n  /**\n   * Create Bao context.\n   * @param {function} baoStepFactory factory function to create BaoStep.\n   */\n  constructor(baoStepFactory) {\n    this.baoStepFactory_ = baoStepFactory;\n    this.vars_ = new Map();\n    this.steps_ = new Map();\n  }\n\n  /** @return {function} BaoStep factory. */\n  getBaoStepFactory() {\n    return this.baoStepFactory_;\n  }\n\n  /**\n   * Get step by name.\n   * @param {string} name \n   */\n  getStep(name) {\n    return this.steps_.get(name);\n  }\n\n  /**\n   * Set the step with JSON data.\n   * @param {string} name \n   * @param {BaoStep} baoStep \n   */\n  setStep(name, baoStep) {\n    this.steps_.set(name, baoStep);\n  }\n\n  /**\n   * Declare a variable if it doesn't exist.\n   * @param {string} name \n   * @param {string} type\n   */\n  maybeDeclareVar(name, type) {\n    if (!this.hasVar(name)) {\n      this.vars_.set(name, Variable.createVariable(name, type));\n    }\n  }\n\n  /**\n   * Get variable by name.\n   * @param {string} name \n   * @return {Variable}\n   */\n  getVar(name) {\n    return this.vars_.get(name);\n  }\n\n  /**\n   * Set value of the variable. Declare one if it doesn't exist with the type of val.\n   * It takes either a literal or an expression object, e.g. {'expr': 'a+b'}.\n   * @param {string} name \n   * @param {string|object} val \n   */\n  setVar(name, val) {\n    // We only eval expr here.\n    if (typeof val === 'object' && val['expr']) {\n      this.setVar(name, this.eval(val['expr']));\n    } else {\n      // Deduce the type.\n      this.maybeDeclareVar(name, typeof val);\n      this.vars_.get(name).setVal(val);\n    }\n  }\n\n  /**\n   * Tell if a variable has been declared.\n   * @param {string} name \n   */\n  hasVar(name) {\n    return this.vars_.has(name);\n  }\n\n  /**\n   * Return a js object with mapping of variable name to value.\n   * @private\n   */\n  getVarContext_() {\n    const varContext = {};\n    for (const [name, val] of this.vars_) {\n      varContext[name] = val.getVal();\n    }\n    return varContext;\n  }\n  /**\n   * Eval an expression in this context.\n   * @param {string} expr \n   */\n  eval(expr) {\n    return (new Function('with(this){return ' + expr + '}')).call(this.getVarContext_());\n  };\n\n  /** Update all variables with DOM elements. */\n  sync() {\n    for (const [name, val] of this.vars_) {\n      val.sync();\n    }\n  }\n}\n\nmodule.exports = Context;\n\n\n\n// WEBPACK FOOTER //\n// ./context.js","const $ = require('jquery');\n\nfunction getType(e) {\n  if (Array.isArray(e)) {\n    return 'array';\n  }\n  return typeof e;\n}\n\n/**\n * A base class for bao variable implemented by specific types.\n */\nclass Variable {\n  /**\n   * Create a variable with name and type.\n   * Do not use this contructor directly. Instead use the factory function\n   * createVariable() in variable.js.\n   * @param {string} name \n   * @param {string} type one of number, string and boolean.\n   */\n  constructor(name, type) {\n    this.name_ = name;\n    this.val_ = undefined;\n    this.type_ = type;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Set the value of this variable.\n   * @param {anything} val\n   */\n  setVal(val) {\n    if (getType(val) !== this.type_) {\n      throw 'Invalid ' + this.type_ + ' ' + val;\n    }\n    this.val_ = val;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Get the value of variable.\n   */\n  getVal() {\n    return this.val_;\n  }\n\n  /** \n   * Update the value of the linked DOM element with this variable.\n   * @private\n   */\n  updateDomElements_() {\n    $('[data-bao-target=\"' + this.name_ + '\"]')\n      .prop('placeholder', this.name_)\n      .val(this.toString());\n  }\n\n  /**\n   * Update the value with the linked DOM element.\n   */\n  sync() {\n    const val = $('[data-bao-target=\"' + this.name_ + '\"]').val();\n    if (val !== undefined) {\n      this.val_ = this.parseString(val);\n    }\n  }\n\n  /**\n   * Converts string to the type.\n   * A base method to be implemented by subclasses.\n   * @param {string} str \n   */\n  parseString(str) {\n    throw 'This method is not implemented';\n  }\n\n  /** Convert the variable to string */\n  toString() {\n    return this.val_ && this.val_.toString();\n  }\n}\n\nmodule.exports = Variable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/base-type.js","const $ = require('jquery');\nconst Context = require('../context');\n\n/** A base class for a step abstraction in bao. */\nclass BaoStep {\n  constructor(context) {\n    // Type of the step. One of BaoStep, IfStep, GotoStep, ActionStep and SwitchStep.\n    this.type_ = 'BaoStep';\n    // Context\n    this.context_ = context;\n    // Step name\n    this.name_ = undefined;\n    // console.log\n    this.print_ = undefined;\n    // Init while entering, another step.\n    this.init_ = undefined;\n    // Setters of this step\n    this.set_ = new Map();\n    // BaoStep factory.\n    this.baoStepFactory_ = context.getBaoStepFactory();\n  }\n\n  /** Get step type. */\n  getType() {\n    return this.type_;\n  }\n\n  /** Get step name. */\n  getName() {\n    return this.name_;\n  }\n\n  /**\n   * Initialize step with JSON data.\n   * @param {object} data \n   */\n  parseJsonData(data) {\n    if (data) {\n      // Set step name.\n      this.name_ = data['name'];\n      // Set init step.\n      if (data['init']) {\n        // Anonymous step.\n        this.init_ = this.baoStepFactory_(this.context_, data['init']);\n      }\n      // print, literal only.\n      if (data['print'] !== undefined) {\n        this.print_ = data['print'];\n      }\n      if (data['decl']) {\n        for (const varName in data['decl']) {\n          // Vars decl.\n          this.context_.maybeDeclareVar(varName, data['decl'][varName]);\n        }\n      }\n      // Set setlist.\n      if (data['set'])\n      for (const varName in data['set']) {\n        this.set_.set(varName, data['set'][varName]);\n      }\n    }\n  }\n\n  /** \n   * Run the setter step.\n   * @private\n   */\n  setVars_() {\n    for (const [name, val] of this.set_) {\n      this.context_.setVar(name, val);\n    }\n  }\n\n  /** Run the step. */\n  run() {\n    // Remove all registered click handlers first.\n    $('[data-bao-action]').off('click').prop('disabled', true);\n    console.log('Current step: ' + this.name_ + ' (' + this.getType() + ')');\n    // Run init\n    if (this.init_) {\n      this.init_.run();\n    }\n    if (this.set_) {\n      this.setVars_();\n    }\n    if (this.print_ != undefined) {\n      console.log(this.print_);\n    }\n    return null;\n  }\n}\n\nmodule.exports = BaoStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/base-step.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 3\n// module chunks = 0","const BaoStep = require('./step');\nconst Context = require('./context');\n\nclass Bao {\n  constructor() {\n    this.context_ = new Context(BaoStep.createBaoStep);\n  }\n\n  /** Initialize bao with JSON data. */\n  parseString(json) {\n    const data = JSON.parse(json);\n    for (const stepJson of data) {\n      this.context_.setStep(stepJson['name'],\n                            BaoStep.createBaoStep(this.context_, stepJson));\n    }\n    return this;\n  }\n\n  /** Start bao flow. */\n  run() {\n    const current = this.context_.getStep('#begin');\n    current.run();\n  }\n}\n\n// Only exports bao runner.\nmodule.exports = {\n  runBao: function(json) {\n    new Bao().parseString(json).run();\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./bao.js","const Context = require('./context');\nconst BaseStep = require('./steps/base-step');\nconst IfStep = require('./steps/if-step');\nconst SwitchStep = require('./steps/switch-step');\nconst GotoStep = require('./steps/goto-step');\nconst ActionStep = require('./steps/action-step');\n\n/**\n * A factory method to create bao steps with appropriate subclasses.\n * @param {Context} context\n * @param {object} data\n * @return {BaoStep}\n */\nfunction createBaoStep(context, data) {\n  if (data['if']) {\n    const ifStep = new IfStep(context);\n    ifStep.parseJsonData(data);\n    return ifStep;\n  }\n  if (data['goto']) {\n    const gotoStep = new GotoStep(context);\n    gotoStep.parseJsonData(data);\n    return gotoStep;\n  }\n  if (data['next']) {\n    const actionStep = new ActionStep(context);\n    actionStep.parseJsonData(data);\n    return actionStep;\n  }\n  if (data['switch']) {\n    const switchStep = new SwitchStep(context);\n    switchStep.parseJsonData(data);\n    return switchStep;\n  }\n  const step = new BaseStep(context);\n  step.parseJsonData(data);\n  return step;\n}\n\nmodule.exports = {\n  // Export factory.\n  createBaoStep: createBaoStep\n};\n\n\n\n// WEBPACK FOOTER //\n// ./step.js","const Variable = require('./types/base-type');\nconst NumberVariable = require('./types/number-type');\nconst StringVariable = require('./types/string-type');\nconst BooleanVariable = require('./types/boolean-type');\nconst ArrayVariable = require('./types/array-type');\n/**\n * A factory to create a variable with name and type.\n * @param {string} name \n * @param {string} type one of number, string and boolean.\n * @return {Variable}\n */\nfunction createVariable(name, type) {\n  switch (type) {\n    case 'number':\n      return new NumberVariable(name);\n    case 'string':\n      return new StringVariable(name);\n    case 'boolean':\n      return new BoolVariable(name);\n    case 'array':\n      return new ArrayVariable(name);\n    default:\n      throw 'Unsupported type ' + type;\n  }\n}\n\nmodule.exports = {\n  createVariable: createVariable\n};\n\n\n\n// WEBPACK FOOTER //\n// ./variable.js","const Variable = require('./base-type');\n\nclass NumberVariable extends Variable {\n  /**\n   * Create a number variable.\n   * @param {string} name \n   */\n  constructor(name) {\n    super(name, 'number');\n  }\n\n  /**\n   * Convert string to number.\n   * @param {string} str e.g. '43.250', '250', 43e250', '0b1101', '0x1f',\n   *                          'NaN', 'Infinity'\n   * @override\n   */\n  parseString(str) {\n    if (str === 'NaN') {\n      return NaN;\n    }\n    val = Number(str);\n    // Unable to parse.\n    if (isNaN(val)) {\n      throw 'Invalid number ' + str;\n    }\n    return val;\n  }\n}\n\nmodule.exports = NumberVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/number-type.js","const Variable = require('./base-type');\n\nclass StringVariable extends Variable {\n  /**\n   * Create a string variable.\n   * @param {string} name \n   */\n  constructor(name) {\n    super(name, 'string');\n  }\n\n  /**\n   * @param {string} str\n   * @override\n   */\n  parseString(str) {\n    return str;\n  }\n}\n\nmodule.exports = StringVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/string-type.js","const Variable = require('./base-type');\n\nclass BooleanVariable extends Variable {\n  /**\n   * Create a boolean variable.\n   * @param {string} name \n   */\n  constructor(name) {\n    super(name, 'boolean');\n  }\n\n  /**\n   * Convert '0', '1', 'true', 'false' to boolean.\n   * @param {string} str\n   * @override\n   */\n  parseString(str) {\n    switch (str) {\n      case '1':\n      case 'true':\n        return true;\n      case '0':\n      case 'false':\n        return false;\n      default:\n        throw 'A boolean value must be either true or false (' + str + ')';\n    }\n  }\n}\n\nmodule.exports = BooleanVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/boolean-type.js","const Variable = require('./base-type');\n\nclass ArrayVariable extends Variable {\n  /**\n   * Create an array variable.\n   * @param {string} name\n   */\n  constructor(name) {\n    super(name, 'array');\n  }\n\n  /**\n   * Convert string to array.\n   * @param {string} str e.g. '[1,2,3]', '[\"1\",\"2\"]', '[[1,2],[3,4]]'\n   * @override\n   */\n  parseString(str) {\n    const arr = JSON.parse(str);\n    if (!Array.isArray(arr)) {\n      throw 'Invalid array ' + str;\n    }\n    return arr;\n  }  \n  /**\n   * Convert array to json string.\n   * @override\n   */\n  toString() {\n    return this.val_ && JSON.stringify(this.val_);\n  }\n}\n\nmodule.exports = ArrayVariable;\n\n\n\n// WEBPACK FOOTER //\n// ./types/array-type.js","const Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that contains if clause. */\nclass IfStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'IfStep';\n    this.condition_ = undefined;\n    this.thenStep_ = undefined;\n    this.elseStep_ = undefined;\n  }\n\n  /**\n   * Parse an IfStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['if'] || !data['if']['condition'] || !data['if']['then']) {\n      throw 'Invalid if step';\n    }\n    this.condition_ = data['if']['condition'];\n    this.thenStep_ = this.baoStepFactory_(this.context_, data['if']['then']);\n    // Optional else clause.\n    if (data['if']['else']) {\n      this.elseStep_ = this.baoStepFactory_(this.context_, data['if']['else']);\n    }\n  }\n\n  /**\n   * If step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.condition_ || !this.thenStep_) {\n      throw 'Invalid if step';\n    }\n    if (this.context_.eval(this.condition_)) {\n      return this.thenStep_.run();\n    }\n    if (this.elseStep_) {\n      return this.elseStep_.run();\n    }\n    return null;\n  }\n}\n\nmodule.exports = IfStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/if-step.js","const Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that contains switch clause. */\nclass SwitchStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'SwitchStep';\n    this.expr_ = undefined;\n    this.cases_ = new Map();\n    this.defaultStep_ = undefined;\n  }\n\n  /**\n   * Parse a SwitchStep.\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['switch'] || !data['switch']['expr'] || !data['switch']['cases']) {\n      throw 'Invalid switch step';\n    }\n    this.expr_ = data['switch']['expr'];\n    for (const [val, clause] of data['switch']['cases']) {\n      this.cases_.set(val, this.baoStepFactory_(this.context_, clause));\n    }\n\n    // Optional default clause.\n    if (data['switch']['default']) {\n      this.defaultStep_ = this.baoStepFactory_(this.context_, data['switch']['default']);\n    }\n  }\n\n  /**\n   * Switch step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.expr_ || !this.cases_) {\n      throw 'Invalid switch step';\n    }\n    const exprVal = this.context_.eval(this.expr_);\n    const clause = this.cases_.get(exprVal);\n    if (clause) {\n      return clause.run();\n    }\n    if (this.defaultStep_) {\n      return this.defaultStep_.run();\n    }\n    return null;\n  }\n}\n\nmodule.exports = SwitchStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/switch-step.js","const Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that contains goto clause. */\nclass GotoStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'GotoStep';\n    // The **name** of goto step.\n    this.goto_ = undefined;\n  }\n\n  /**\n   * Parse an GotoStep。\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['goto']) {\n      throw 'Invalid goto step';\n    }\n    this.goto_ = data['goto'];\n  }\n\n  /**\n   * Goto step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    if (!this.goto_ || !this.context_.getStep(this.goto_)) {\n      throw 'Invalid goto step';\n    }\n    return this.context_.getStep(this.goto_).run();\n  }\n}\n\nmodule.exports =  GotoStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/goto-step.js","const $ = require('jquery');\nconst Context = require('../context');\nconst BaoStep = require('./base-step');\n\n/** A step that waits on UI click actions. */\nclass ActionStep extends BaoStep {\n  constructor(context) {\n    super(context);\n\n    this.type_ = 'ActionStep';\n    // Next steps.\n    this.nextSteps_ = new Map();\n  }\n\n  /**\n   * Parse an ActionStep。\n   * @param {object} data \n   * @override\n   */\n  parseJsonData(data) {\n    super.parseJsonData(data);\n    if (!data['next']) {\n      throw 'Invalid action step';\n    }\n    if (data['next']) {\n      for (const action in data['next']) {\n        // Create an anonymous step.\n        const next = this.baoStepFactory_(this.context_, data['next'][action]);\n        this.nextSteps_.set(action, next);\n      }\n    }\n  }\n\n  /**\n   * Action step implementation.\n   * @override\n   */\n  run() {\n    super.run();\n    // Register click handler.\n    for (const [action, next] of this.nextSteps_) {\n      $('[data-bao-action=\"' + action + '\"]')\n          .prop('disabled', false)\n          .click([this.context_, next], function(e) {\n            const context = e.data[0];\n            context.sync();\n            const next = e.data[1];\n            next.run();\n          });\n    }\n    return null;\n  }\n}\n\nmodule.exports = ActionStep;\n\n\n\n// WEBPACK FOOTER //\n// ./steps/action-step.js"],"sourceRoot":""}