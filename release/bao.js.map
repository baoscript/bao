{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f0d7fbfe7f6cfd520930","webpack:///./bao.js","webpack:///external \"jQuery\""],"names":["$","require","evalWithContext","context","expr","Function","call","Variable","name","name_","val_","updateDomElements_","val","getVarContext","el","eval","e","Context","vars_","Map","steps_","has","set","BaoStep","get","stepJson","getStep","parseJsonData","hasVar","maybeDeclareVar","setVal","varContext","getVal","sync","context_","print_","undefined","init_","nextSteps_","condition_","then_","else_","goto_","set_","action","next","prop","click","data","run","varName","setVar","off","console","log","setVars_","registerButton","Bao","json","JSON","parse","setStep","current","module","exports"],"mappings":"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","file":"bao.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Bao\"] = factory(require(\"jQuery\"));\n\telse\n\t\troot[\"Bao\"] = factory(root[\"jQuery\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f0d7fbfe7f6cfd520930","const $ = require('jquery');\n\n/**\n * Eval an expression with context.\n * @param {object} context \n * @param {string} expr \n */\nconst evalWithContext = function(context, expr) {\n  return (new Function(\"with(this){return \" + expr + \"}\")).call(context);\n};\n\nclass Variable {\n  /**\n   * Create a variable with name.\n   * @param {string} name \n   */\n  constructor(name) {\n    this.name_ = name;\n    this.val_ = null;\n    this.updateDomElements_();\n  }\n\n  /**\n   * Set the value of variable. It takes either a literal or\n   * an expression object, e.g. {'expr': 'a+b'}.\n   * @param {string|object} val \n   * @param {Context} context \n   */\n  setVal(val, context) {\n    // We only eval expression here.\n    if (typeof val === 'object' && val['expr']) {\n      this.val_ = evalWithContext(context.getVarContext(), val['expr']);\n    } else {\n      this.val_ = val;\n    }\n    this.updateDomElements_();\n  }\n\n  /**\n   * Get the value of variable.\n   */\n  getVal() {\n    return this.val_;\n  }\n\n  /** \n   * Update the value of corresponding DOM element with this variable.\n   * @private\n   */\n  updateDomElements_() {\n    const el = $('[data-bao-target=\"' + this.name_ + '\"]');\n    el.val(this.val_);\n  }\n\n  /**\n   * Update the value with corresponding DOM element.\n   */\n  sync() {\n    const el = $('[data-bao-target=\"' + this.name_ + '\"]');\n    try {\n      // Try to parse types, otherwise treat as a string literal.\n      this.val_ = eval(el.val());\n    } catch (e) {\n      this.val_ = el.val();\n    }\n  }\n}\n\nclass Context {\n  constructor() {\n    this.vars_ = new Map();\n    this.steps_ = new Map();\n  }\n\n  /**\n   * Get the step. Create one if it doesn't exist.\n   * @param {string} name \n   */\n  getStep(name) {\n    if (!this.steps_.has(name)) {\n      this.steps_.set(name, new BaoStep(this, name));\n    }\n    return this.steps_.get(name);\n  }\n\n  /**\n   * Set the step with JSON data.\n   * @param {string} name \n   * @param {object} stepJson \n   */\n  setStep(name, stepJson) {\n    this.getStep(name).parseJsonData(stepJson);\n  }\n\n  /**\n   * Declare a variable if it doesn't exist.\n   * @param {string} name \n   */\n  maybeDeclareVar(name) {\n    if (!this.hasVar(name)) {\n      this.vars_.set(name, new Variable(name));\n    }\n  }\n\n  /**\n   * Get variable\n   * @param {string} name \n   * @return {Variable}\n   */\n  getVar(name) {\n    return this.vars_.get(name);\n  }\n\n  /**\n   * Set value of the variable. Declare one if it doesn't exist.\n   * @param {string} name \n   * @param {string|object} val \n   */\n  setVar(name, val) {\n    this.maybeDeclareVar(name);\n    this.vars_.get(name).setVal(val, this);\n  }\n\n  /**\n   * Tell if a variable has been declared.\n   * @param {string} name \n   */\n  hasVar(name) {\n    return this.vars_.has(name);\n  }\n\n  /** Return a js object with mapping of variable name to value. */\n  getVarContext() {\n    const varContext = {};\n    for (const [name, val] of this.vars_) {\n      varContext[name] = val.getVal();\n    }\n    return varContext;\n  }\n\n  /** Update all variables with DOM elements. */\n  sync() {\n    for (const [name, val] of this.vars_) {\n      val.sync();\n    }\n  }\n}\n\nclass BaoStep {\n  constructor(context, name = '') {\n    // Context\n    this.context_ = context;\n\n    // Step name\n    this.name_ = name;\n\n    // console.log\n    this.print_ = undefined;\n\n    // Init while entering, another step.\n    this.init_ = null;\n\n    // Next steps.\n    this.nextSteps_ = new Map();\n\n    this.condition_ = null;\n    this.then_ = null;\n    this.else_ = null;\n\n    // Goto\n    this.goto_ = null;\n\n    // Setters of this step\n    this.set_ = new Map();\n  }\n\n  /**\n   * Register click handler for next steps.\n   * @param {string} action \n   * @param {BaoStep} next \n   */\n  registerButton(action, next) {\n    $('[data-bao-action=\"' + action + '\"]').prop('disabled', false);\n    $('[data-bao-action=\"' + action + '\"]').click([this.context_, next], function(e) {\n      const context = e.data[0];\n      context.sync();\n      const next = e.data[1];\n      next.run();\n    });\n  }\n  \n  /** Get step name. */\n  getName() {\n    return this.name_;\n  }\n\n  /**\n   * Initialize step with JSON data.\n   * @param {object} data \n   */\n  parseJsonData(data) {\n    if (data) {\n      // Set step name.\n      this.name_ = data['name'];\n      // Set init step\n      if (data['init']) {\n        // Anonymous step\n        this.init_ = new BaoStep(this.context_);\n        this.init_.parseJsonData(data['init']);\n      }\n      // print, literal only\n      if (data['print'] !== undefined) {\n        this.print_ = data['print'];\n      }\n      if (data['decl']) {\n        for (const varName of data['decl']) {\n          // Vars decl\n          this.context_.maybeDeclareVar(varName);\n        }\n      }\n      // Set setlist\n      for (const varName in data['set']) {\n        this.set_.set(varName, data['set'][varName]);\n      }\n\n      // At most one of next, goto and case.\n\n      // Set goto\n      if (data['goto']) {\n        // goto must be a string\n        this.goto_ = this.context_.getStep(data['goto']);\n      }\n      // Next, register buttons\n      if (data['next']) {\n        for (const action in data['next']) {\n          const next = new BaoStep(this.context_);\n          next.parseJsonData(data['next'][action]);\n          this.nextSteps_.set(action, next);\n        }\n      }\n\n      // if clause.\n      if (data['if']) {\n        this.condition_ = data['if']['condition'];\n        this.then_ = new BaoStep(this.context_);\n        this.then_.parseJsonData(data['if']['then']);\n        if (data['if']['else']) {\n          this.else_ = new BaoStep(this.context_);\n          this.else_.parseJsonData(data['if']['else']);\n        }\n      }\n    }\n  }\n\n  /** \n   * Run the setter step.\n   * @private\n   */\n  setVars_() {\n    for (const [name, val] of this.set_) {\n      this.context_.setVar(name, val);\n    }\n  }\n\n  /** Run the step. */\n  run() {\n    // Remove all registered click handlers first.\n    $('[data-bao-action]').off('click').prop('disabled', true);\n\n    if (this.name_) {\n      console.log('Current step: ' + this.name_);\n    }\n\n    // Run init\n    if (this.init_) {\n      this.init_.run();\n    }\n    if (this.set_) {\n      this.setVars_();\n    }\n    if (this.print_ != undefined) {\n      console.log(this.print_);\n    }\n\n    // Register click handler.\n    for (const [action, next] of this.nextSteps_) {\n      this.registerButton(action, next);\n    }\n\n    if (this.condition_) {\n      if (evalWithContext(this.context_.getVarContext(), this.condition_)) {\n        return this.then_.run();\n      }\n      if (this.else_) {\n        return this.else_.run();\n      }\n    }\n\n    return this.goto_ && this.goto_.run();\n  }\n\n}\n\nclass Bao {\n  constructor() {\n    this.context_ = new Context();\n  }\n\n  /** Initialize bao with JSON data. */\n  parseString(json) {\n    const data = JSON.parse(json);\n    for (const stepJson of data) {\n      this.context_.setStep(stepJson['name'], stepJson);\n    }\n  }\n\n  /** Start bao flow. */\n  run() {\n    const current = this.context_.getStep('#begin');\n    current.run();\n  }\n}\n\nmodule.exports = Bao;\n\n\n\n// WEBPACK FOOTER //\n// ./bao.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}